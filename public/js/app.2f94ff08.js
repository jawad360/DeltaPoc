webpackJsonp([1],{"/k2V":function(e,t){},0:function(e,t,a){e.exports=a("x35b")},"14AH":function(e,t){},"3K3t":function(e,t){},"8AWB":function(e,t){},"9Tgt":function(e,t){},AtnB:function(e,t){},CUE1:function(e,t){},DjBn:function(e,t){},Dnte:function(e,t){},E5Ku:function(e,t){},G3BA:function(e,t){},KAXf:function(e,t){},Qqs1:function(e,t){},S7ns:function(e,t){},SzdN:function(e,t){},biZJ:function(e,t){},cNFf:function(e,t){},e7d1:function(e,t){},eJZ5:function(e,t){},"g+rx":function(e,t){},hqEJ:function(e,t){},j2xv:function(e,t){},lrex:function(e,t){},mKbE:function(e,t){},tUev:function(e,t){},"tY/D":function(e,t){},tqee:function(e,t){},wBlv:function(e,t){},x35b:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("/5sW");function o(e,t){console.log("going to parent node");const a=t.state.currentPair,s=t.getters.currentPairs,o=s[a];if(o&&o.parent&&o.parent!==a){const e=s[o.parent];e&&e.id!==a&&t.dispatch("setCurrentPair",o.parent)}}function r(e,t,a){console.log("going to next/previous sibling");const s=t.state.currentPair,o=t.getters.currentPair,r=o&&o.parent?o.parent:s;if(r===s)return;const n=t.getters.currentPairs,i=n[r];let l=s,d=i&&i.children||[];if(d=[...d].sort(),d.length){const e=d.indexOf(s)||0,t=e+a;t>-1&&t<d.length&&(l=d[t])}const c=n[l];c&&c.id!==s&&t.dispatch("setCurrentPair",c.id)}function n(e,t,a){console.log(`going to child node #${a}`);const s=t.state.currentPair,o=t.getters.currentPair,r=t.getters.currentPairs,n=o&&o.children||[];let i=s;n.length&&(a=a<0?0:a,a=a>n.length-1?n.length-1:a,i=n[a]);const l=r[i];l&&i!==s&&t.dispatch("setCurrentPair",i)}const i={all_shortcuts:{},add:function(e,t,a){const s={type:"keydown",propagate:!1,disable_in_input:!1,target:document,keycode:!1};if(a)for(const n in s)"undefined"==typeof a[n]&&(a[n]=s[n]);else a=s;var o=a.target;"string"===typeof a.target&&(o=document.getElementById(a.target));e=e.toLowerCase();var r=function(s){let o;var r;if((s=s||window.event,a["disable_in_input"])&&(s.target?r=s.target:s.srcElement&&(r=s.srcElement),3==r.nodeType&&(r=r.parentNode),"INPUT"==r.tagName||"TEXTAREA"==r.tagName))return;s.keyCode?o=s.keyCode:s.which&&(o=s.which);var n=String.fromCharCode(o).toLowerCase();188==o&&(n=","),190==o&&(n=".");var i=e.split("+"),l=0,d={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},c={esc:27,escape:27,tab:9,space:32,return:13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,break:19,insert:45,home:36,delete:46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},u={shift:{wanted:!1,pressed:!1},ctrl:{wanted:!1,pressed:!1},alt:{wanted:!1,pressed:!1},meta:{wanted:!1,pressed:!1}};s.ctrlKey&&(u.ctrl.pressed=!0),s.shiftKey&&(u.shift.pressed=!0),s.altKey&&(u.alt.pressed=!0),s.metaKey&&(u.meta.pressed=!0);for(var p=0;p<i.length;p++){let e=i[p];"ctrl"==e||"control"==e?(l++,u.ctrl.wanted=!0):"shift"==e?(l++,u.shift.wanted=!0):"alt"==e?(l++,u.alt.wanted=!0):"meta"==e?(l++,u.meta.wanted=!0):e.length>1?c[e]==o&&l++:a["keycode"]?a["keycode"]==o&&l++:n==e?l++:d[n]&&s.shiftKey&&(n=d[n],n==e&&l++)}if(l==i.length&&u.ctrl.pressed==u.ctrl.wanted&&u.shift.pressed==u.shift.wanted&&u.alt.pressed==u.alt.wanted&&u.meta.pressed==u.meta.wanted&&(t(s),!a["propagate"]))return s.cancelBubble=!0,s.returnValue=!1,s.stopPropagation&&(s.stopPropagation(),s.preventDefault()),!1};this.all_shortcuts[e]={callback:r,target:o,event:a["type"]},o.addEventListener?o.addEventListener(a["type"],r,!1):o.attachEvent?o.attachEvent("on"+a["type"],r):o["on"+a["type"]]=r},remove:function(e){e=e.toLowerCase();var t=this.all_shortcuts[e];if(delete this.all_shortcuts[e],t){var a=t["event"],s=t["target"],o=t["callback"];s.detachEvent?s.detachEvent("on"+a,o):s.removeEventListener?s.removeEventListener(a,o,!1):s["on"+a]=!1}}};function l(e){const t={up:"shift+up",down:"shift+down",left:"shift+left",right:"shift+right"};i.add(t.left,t=>o(t,e),{type:"keydown",propagate:!1,target:document}),i.add(t.right,t=>n(t,e,0),{type:"keydown",propagate:!1,target:document}),i.add(t.up,t=>r(t,e,-1),{type:"keydown",propagate:!1,target:document}),i.add(t.down,t=>r(t,e,1),{type:"keydown",propagate:!1,target:document})}var d=a("mtWM"),c=a.n(d),u=this&&this.__awaiter||function(e,t,a,s){return new(a||(a=Promise))(function(o,r){function n(e){try{l(s.next(e))}catch(e){r(e)}}function i(e){try{l(s["throw"](e))}catch(e){r(e)}}function l(e){e.done?o(e.value):new a(function(t){t(e.value)}).then(n,i)}l((s=s.apply(e,t||[])).next())})};c.a.create({baseURL:"http://jsonplaceholder.typicode.com/",headers:{Authorization:"Bearer {token}"}});function p(e){return u(this,void 0,void 0,function*(){const t=N("signin");try{const a=yield w("post",t,"application/json",JSON.stringify({id_token:e}));return console.log("in postAuth. response is= ",a),`${a.response}`}catch(e){throw console.log("in postAuth. Error in call to signin at server.",e),e}})}function h(e,t){return u(this,void 0,void 0,function*(){const a=N("user_state");console.log(`save user_state url is ${a}`);try{const s=yield w("post",a,"application/json",JSON.stringify(e),void 0,t);return s.response}catch(e){throw console.log(`error in makeRequest for posting userState. ${JSON.stringify(e)}`+`Error is ${e.status}: ${e.response}`),e}})}function g(e,t){return u(this,void 0,void 0,function*(){let a=N("pair");a=`${a}/${e}`;try{const e=yield w("delete",a,void 0,void 0,void 0,t);return e.response}catch(e){throw console.log(`error in makeRequest for deleting pair. ${JSON.stringify(e)}`+`Error is ${e.status}: ${e.response}`),e}})}function f(e,t){return u(this,void 0,void 0,function*(){let a=N("vars");a=`${a}/${e}`;try{const e=yield w("delete",a,void 0,void 0,void 0,t);return e.response}catch(e){throw console.log(`error in makeRequest for deleting variable. ${JSON.stringify(e)}`+`Error is ${e.status}: ${e.response}`),e}})}function m(e,t){return u(this,void 0,void 0,function*(){const a=N("pairs");console.log(`save file url is ${a}`);const s=JSON.stringify({pairsArray:e});try{const e=yield w("post",a,"application/json",s,void 0,t);return e.response}catch(e){throw console.log(`error in makeRequest for posting pair. ${JSON.stringify(e)}`+`Error is ${e.status}: ${e.response}`),e}})}function b(e,t){return u(this,void 0,void 0,function*(){const a=N("nlp/intents");console.log(`save file url is ${a}`);const s=JSON.stringify({nlpIntents:e});try{const e=yield w("post",a,"application/json",s,void 0,t);return e.response}catch(e){throw console.log(`error in makeRequest for posting nlp intents. ${JSON.stringify(e)}`+`Error is ${e.status}: ${e.response}`),e}})}function v(e,t){return u(this,void 0,void 0,function*(){const a=N("vars");console.log(`save file url is ${a}`);const s=JSON.stringify({vars:e});try{const e=yield w("post",a,"application/json",s,void 0,t);return e.response}catch(e){throw console.log(`error in makeRequest for posting vars. ${JSON.stringify(e)}`+`Error is ${e.status}: ${e.response}`),e}})}function y(e,t,a){return u(this,void 0,void 0,function*(){const s=N(`table/${t}`);try{const t=yield w("post",s,"application/octet-stream",e,void 0,a);return t.response}catch(e){throw console.log(`error in makeRequest for uploading fileData. ${JSON.stringify(e)}`+`Error is ${e.status}: ${e.response}`),e}})}function P(e,t){return u(this,void 0,void 0,function*(){let a=N("nextid");a=a+"/"+e,console.log(`getNextId url is ${a}`);try{const e=yield w("get",a,void 0,void 0,void 0,t),s=JSON.parse(e.response);return s&&s.nextId||null}catch(e){throw console.log("error in makeRequest for get nextid. "+`Error is ${JSON.stringify(e)}- ${e.status}: ${e.response}`),e}})}function S(e,t){return u(this,void 0,void 0,function*(){let a=N("pairs/f");a+="/"+e,console.log(`getPairsFromFileId url is ${a}`);try{const e=yield w("get",a,void 0,void 0,void 0,t),s=JSON.parse(e.response);return s||{}}catch(e){let t="error in makeRequest for getPairsFromFileId. ";return t+=`Error is ${JSON.stringify(e)}- ${e.status}: ${e.response}`,console.log(t,e),{}}})}function I(e){return u(this,void 0,void 0,function*(){const t=N("files");console.log(`getFileNames url is ${t}`);try{const a=yield w("get",t,void 0,void 0,void 0,e),s=JSON.parse(a.response);return s||[]}catch(e){let t="error in makeRequest for getFileNames. ";return t+=`Error is ${JSON.stringify(e)}- ${e.status}: ${e.response}`,console.log(t,e),[]}})}function x(e,t){return u(this,void 0,void 0,function*(){const a=N(`nlp/intents/${e}`);console.log(`getNlpIntents url is ${a}`);let s=[];try{const e=yield w("get",a,void 0,void 0,void 0,t);return s=JSON.parse(e.response)||[],{nlpIntents:s,msg:""}}catch(e){let t="error in makeRequest for getNlpIntents. ";return t+=`Error is ${JSON.stringify(e)}- ${e.status}: ${e.response}`,console.log(t,e),{nlpIntents:s,msg:t}}})}function T(e,t){return u(this,void 0,void 0,function*(){let a=N("vars");a+="/"+encodeURIComponent(e),console.log(`getVars url is ${a}`);let s=[];try{const e=yield w("get",a,void 0,void 0,void 0,t);return s=JSON.parse(e.response)||[],{vars:s,msg:""}}catch(e){let t="error in makeRequest for getVars. ";return t+=`Error is ${JSON.stringify(e)}- ${e.status}: ${e.response}`,console.log(t,e),{vars:s,msg:t}}})}function C(e,t){return u(this,void 0,void 0,function*(){let a=N("pairs/p");a+="/"+encodeURIComponent(JSON.stringify(e)),console.log(`getPairsFromPairIds url is ${a}`);try{const e=yield w("get",a,void 0,void 0,void 0,t),s=JSON.parse(e.response);return s||[]}catch(e){let t="error in makeRequest for getPairsFromPairIds. ";return t+=`Error is ${JSON.stringify(e)}- ${e.status}: ${e.response}`,console.log(t,e),[]}})}function w(e,t,a,s,o,r){return new Promise((n,i)=>{const l=new XMLHttpRequest;if(l.open(e,t),r&&(o||(o=[]),o.push({name:"Authorization",value:r})),o)for(const e of o)l.setRequestHeader(e.name,e.value);l.onload=function(){this.status>=200&&this.status<400?n({status:this.status,response:l.response}):i({status:this.status,statusText:l.statusText,response:l.response})},l.onerror=function(){i({status:this.status,statusText:l.statusText})},a&&l.setRequestHeader("Content-Type",a),"post"!==e&&"put"!==e||!s?l.send():l.send(s)})}function N(e,t=window.location.toString()){const a="#",s=t.indexOf(a);let o=t.slice(0,s);return o.endsWith("/")||(o+="/"),o.indexOf("/ce/")>-1&&(console.log("/ce/ found!"),o=o.replace("/ce/",""),o+="/"),o+e}function k(e,t){const a=e<<t|e>>>32-t;return a}function O(e){let t,a,s="";for(t=7;t>=0;t--)a=e>>>4*t&15,s+=a.toString(16);return s}function $(e){e=e.replace(/\r\n/g,"\n");let t="";for(let a=0;a<e.length;a++){const s=e.charCodeAt(a);s<128?t+=String.fromCharCode(s):s>127&&s<2048?(t+=String.fromCharCode(s>>6|192),t+=String.fromCharCode(63&s|128)):(t+=String.fromCharCode(s>>12|224),t+=String.fromCharCode(s>>6&63|128),t+=String.fromCharCode(63&s|128))}return t}function j(e){let t,a,s;const o=new Array(80);let r,n,i,l,d,c,u=1732584193,p=4023233417,h=2562383102,g=271733878,f=3285377520;e=$(e);const m=e.length,b=new Array;for(a=0;a<m-3;a+=4)s=e.charCodeAt(a)<<24|e.charCodeAt(a+1)<<16|e.charCodeAt(a+2)<<8|e.charCodeAt(a+3),b.push(s);switch(m%4){case 0:a=2147483648;break;case 1:a=e.charCodeAt(m-1)<<24|8388608;break;case 2:a=e.charCodeAt(m-2)<<24|e.charCodeAt(m-1)<<16|32768;break;case 3:a=e.charCodeAt(m-3)<<24|e.charCodeAt(m-2)<<16|e.charCodeAt(m-1)<<8|128;break}b.push(a);while(b.length%16!==14)b.push(0);for(b.push(m>>>29),b.push(m<<3&4294967295),t=0;t<b.length;t+=16){for(a=0;a<16;a++)o[a]=b[t+a];for(a=16;a<=79;a++)o[a]=k(o[a-3]^o[a-8]^o[a-14]^o[a-16],1);for(r=u,n=p,i=h,l=g,d=f,a=0;a<=19;a++)c=k(r,5)+(n&i|~n&l)+d+o[a]+1518500249&4294967295,d=l,l=i,i=k(n,30),n=r,r=c;for(a=20;a<=39;a++)c=k(r,5)+(n^i^l)+d+o[a]+1859775393&4294967295,d=l,l=i,i=k(n,30),n=r,r=c;for(a=40;a<=59;a++)c=k(r,5)+(n&i|n&l|i&l)+d+o[a]+2400959708&4294967295,d=l,l=i,i=k(n,30),n=r,r=c;for(a=60;a<=79;a++)c=k(r,5)+(n^i^l)+d+o[a]+3395469782&4294967295,d=l,l=i,i=k(n,30),n=r,r=c;u=u+r&4294967295,p=p+n&4294967295,h=h+i&4294967295,g=g+l&4294967295,f=f+d&4294967295}const v=O(u)+O(p)+O(h)+O(g)+O(f);return v.toLowerCase()}const _=j("Hello");console.log(_);const D={auth2:null};function R(e){return new Promise(t=>setTimeout(t,e))}function B(){let e=Date.now();return"undefined"!==typeof performance&&"function"===typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const a=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?a:3&a|8).toString(16)})}var A=a("3EgV"),E=a.n(A),F=(a("Qqs1"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{id:"appRoot"}},[a("v-content",{staticClass:"pageContentContainer",attrs:{app:""}},[a("router-view",{staticClass:"pageContent"},[a("v-container",{attrs:{fluid:""}})],1)],1)],1)}),V=[],M=a("XyMi");function L(e){a("G3BA")}var q,U,J=null,z=!1,W=L,H=null,G=null,K=Object(M["a"])(J,F,V,z,W,H,G),Q=K.exports,X=a("/ocq"),Y=a("BDm9"),Z=a.n(Y),ee=a("M4fF"),te=a("EOM2"),ae=a("NYxO");(function(e){e["success"]="success",e["info"]="info",e["warning"]="warning",e["error"]="error"})(q||(q={})),function(e){e["text"]="text",e["confirm"]="confirm",e["choice"]="choice",e["choiceComplex"]="choiceComplex",e["card"]="card",e["heroCard"]="heroCard",e["carousel"]="carousel",e["prompt"]="prompt",e["action"]="action",e["picker"]="picker",e["captureTextInput"]="captureTextInput",e["todo"]="todo",e["add"]="add"}(U||(U={}));const se={};function oe(){const e=window.location.toString(),t=e.split("/"),a=t.length-1;t[a-1];return{currentUserId:"5",users:se}}function re(e=!1){let t;console.log("in loadInitialState");const a=oe();let s,o=a.users[a.currentUserId];return o||(a.currentUserId="0",o=a.users["0"]),console.log(`user is ${JSON.stringify(o)}`),s={header:{module:"",goal:"",topic:""},pairs:{}},t={currentUser:a.currentUserId,currentFile:"",currentPair:"",currentBotSaying:0,editedPairs:[],openBotSayings:{},users:{},files:{},unSavedPairs:{},callSaveLater:{},treeChanged:0,globalError:{alertText:"",alertType:q.error},stateCounter:0,keyboardShortcuts:{},copiedTabs:[],locateCurrentPair:!1,nlpIntents:[],NlpIntentsBeingSaved:[],NlpIntentsToSave:[],vars:[],unSavedVars:{},inFlightVars:{}},t}var ne,ie=a("OMJi"),le=this&&this.__awaiter||function(e,t,a,s){return new(a||(a=Promise))(function(o,r){function n(e){try{l(s.next(e))}catch(e){r(e)}}function i(e){try{l(s["throw"](e))}catch(e){r(e)}}function l(e){e.done?o(e.value):new a(function(t){t(e.value)}).then(n,i)}l((s=s.apply(e,t||[])).next())})};s["default"].use(ae["a"]),function(e){e["setGlobalError"]="setGlobalError",e["setCurrentUser"]="setCurrentUser",e["setCurrentFile"]="setCurrentFile",e["setCurrentPair"]="setCurrentPair",e["setCurrentPairTemp"]="setCurrentPairTemp",e["updateNlpIntents"]="updateNlpIntents",e["setNlpIntents"]="setNlpIntents",e["saveNlpIntents"]="saveNlpIntents",e["queueNlpIntents"]="queueNlpIntents",e["clearNlpIntentsToSave"]="clearNlpIntentsToSave",e["locateCurrentPair"]="locateCurrentPair",e["updatePairProps"]="updatePairProps",e["updatePairs"]="updatePairs",e["addNewPair"]="addNewPair",e["setPairVersion"]="setPairVersion",e["updateCollapsedPairs"]="updateCollapsedPairs",e["changeParentNode"]="changeParentNode",e["addJumpToNode"]="addJumpToNode",e["deleteJumpToNode"]="deleteJumpToNode",e["deletePair"]="deletePair",e["savePair"]="savePair",e["savePairs"]="savePairs",e["setSaveInProgress"]="setSaveInProgress",e["setCallSaveLater"]="setCallSaveLater",e["clearCallSaveLater"]="clearCallSaveLater",e["treeChangedParent"]="treeChangedParent",e["addToUnsavedPairs"]="addToUnsavedPairs",e["setVars"]="setVars",e["addNewVar"]="addNewVar",e["setVarVersion"]="setVarVersion",e["setInFlightVars"]="setInFlightVars",e["clearInFlightVars"]="clearInFlightVars",e["saveVars"]="saveVars",e["updateVar"]="updateVar",e["deleteVar"]="deleteVar",e["updateUserSays"]="updateUserSays",e["updateBotSays"]="updateBotSays",e["addBotSaying"]="addBotSaying",e["updateBotSaying"]="updateBotSaying",e["updateBSLabel"]="updateBSLabel",e["updateBSTextData"]="updateBSTextData",e["updateBSChoiceData"]="updateBSChoiceData",e["updateBSHeroCardData"]="updateBSHeroCardData",e["updateBSCustomActionData"]="updateBSCustomActionData",e["updateBSPickerData"]="updateBSPickerData",e["updateBSCaptureData"]="updateBSCaptureData",e["updateBSTodoData"]="updateBSTodoData",e["copyTab"]="copyTab",e["pasteTab"]="pasteTab"}(ne||(ne={}));const de=new ae["a"].Store({strict:!1,state:Object.assign({},re(!0)),getters:{currentPair:(e,t)=>{console.log("in store currentPair getter");const a=e.currentPair;if(!a)return null;const s=t.currentPairs,o=s[a]||null;return o},currentPairs:e=>{console.log("inside store getter for currentPairs");const t=e.currentFile,a=e.files[t];if(!a)return{};const s=a.data,o=s?s.pairs:{};return console.log(`from store.getCurrentPairs. returning ${Object.keys(o).length} pairs`),o},currentUser:e=>{const t=e.currentUser;if(!t)return null;const a=e.users,s=a[t]||null;return s},collapsedPairs:e=>{console.log("get collapsedPairs called");const t=e.currentUser;if(!t)return null;const a=e.users,s=a[t]||null;return s?(console.log(`${e.currentUser}, ${e.currentFile}`,JSON.stringify(s.state)),s.state.collapsedPairs[e.currentFile]||{}):{}},isAuthenticated:e=>{const t=e.currentUser;if(!t)return!1;const a=e.users,s=a[t]||null;return!!s&&!!s.token},nlpIntents:(e,t)=>{return e.nlpIntents}},mutations:{setGlobalError(e,t){let a=t,o=q.error;"object"===typeof t&&(a=t.msg,o=t.alertType),s["default"].set(e,"globalError",{alertText:(new Date).toString()+"  \n"+a,alertType:o||q.error})},setCurrentUser(e,t){me(e,t)},setCurrentFile(e,t){t&&t.name&&(e.currentFile=t.name,s["default"].set(e.files,t.name,t))},setCurrentPair(e,t){fe(e,t)},setCurrentPairTemp(e,t){const a=de.getters.currentPairs,s=a[t];s&&s.id!==e.currentPair&&(e.currentPair=s.id),e.locateCurrentPair=!1},locateCurrentPair(e,t){fe(e,t),e.locateCurrentPair=!0},updateCollapsedPairs(e,{pairs:t,pairId:a}){if(!a)return;const o="updateCollapsedPairs mutation failed as",r=t[a];if(!r)return void console.log(`${o} pair '${a}' not found.`);if(!e.currentFile)return;const n=e.users[e.currentUser];if(!n)return void console.log(`${o} user '${e.currentUser}' not found`);const i=n.state.collapsedPairs[e.currentFile];i?a in i?s["default"].delete(i,a):s["default"].set(i,a,1):s["default"].set(n.state.collapsedPairs,e.currentFile,{[a]:1})},updatePairProps(e,t){const{pairId:a,propName:o,propValue:r}=t;if(!a)return;const n=de.getters.currentPairs,i=n[a];i&&"object"!==typeof r&&(s["default"].set(i,o,r),s["default"].set(e.unSavedPairs,i.id,!0))},updatePairs(e,t){const a=t&&t.newPairs||[],o="updatePairs mutation failed as";if(a.length)for(const r of a){const t=r.file;if(!t){console.log(`in updatePairs. newPair '${r.id}' is missing 'file' prop. Can't update it.`);continue}const a=e.files[t];if(!a||!a.data)return;const o=a.data.pairs;s["default"].set(o,r.id,r)}else console.log(`${o} pairs array is empty.`)},changeParentNode(e,t){const{newParentId:a,pair:o}=t,r="changeParentNode mutation failed as",n=q.error;if(!a)return void console.log(`${r} newParentId is empty.`);if(!o||!o.parent){const t="Can't change root node's parent.";return console.log(t),void s["default"].set(e,"globalError",{alertText:t,alertType:n})}if(o.parent===a){const t="newParentId is same as current parent. Nothing to change";return console.log(t),void s["default"].set(e,"globalError",{alertText:t,alertType:n})}if(a===o.id){const t=`New Parent Node= ${a}. This node's ID: ${o.id}.`+" Can't set this node to be its own parent!";return console.log(t),void s["default"].set(e,"globalError",{alertText:t,alertType:n})}const i=de.getters.currentPairs,l=i[a];if(!l)return void console.log(`${r} new parent with id '${a}' not found.`);const d=ve(i,o.id);if(d.indexOf(a)>-1){console.log(`${r} my new parent is my child!`);const t=`The new parent (${a}) is a descendant of ${o.id}!`+" Can't have one of my descendants as my new parent.";return console.log(t),s["default"].set(e,"globalError",{alertText:t,alertType:n}),e}const c=i[o.parent];if(!c)return void console.log(`${r} current parent not found in pairs.`);const u=c.children.filter(e=>e!==o.id);if(s["default"].set(c,"children",u),0===u.length){const e=de.getters.collapsedPairs;c.id in e&&s["default"].delete(e,c.id)}s["default"].set(e.unSavedPairs,c.id,!0);const p=l.children.filter(e=>e!==o.id);p.push(o.id),s["default"].set(l,"children",p),s["default"].set(e.unSavedPairs,l.id,!0),s["default"].set(o,"parent",a),s["default"].set(e.unSavedPairs,o.id,!0),fe(e,o.id)},addJumpToNode(e,t){const{pairId:a,jumpToNodeId:o}=t,r="addJumpToNode mutation failed as";if(!a||!o)return void console.log(`${r} parentId or jumpToNodeId are empty.`);const n=de.getters.currentPairs,i=n[a];if(!i)return void console.log(`${r} pair '${a}' is not found in pairs collection.`);if(i.children.length)return void console.log(`${r} pair '${a}' already has children.`);const l=[o];s["default"].set(i,"jumpToChildren",l),s["default"].set(e.unSavedPairs,i.id,!0),fe(e,i.id)},deleteJumpToNode(e,t){if(!t)return;const a="deleteJumpToNode mutation failed as",o=de.getters.currentPairs,r=o[t];r?r.jumpToChildren&&(s["default"].delete(r,"jumpToChildren"),s["default"].set(e.unSavedPairs,t,!0),fe(e,t)):console.log(`${a} pair '${t}' not found.`)},addNewPair(e,t){q.error;const a=t&&t.newPair,o="addNewPair mutation failed as";if(!a)return void console.log(`${o} newPair is empty. can't add it`);if(!a.parent)return void console.log(`${o} newPair's parent is empty. Can't have more than one root`);if(!a.id)return void console.log(`${o} newPair id is empty. can't add it`);e.files[e.currentFile];const r=de.getters.currentPairs,n=a.id,i=r[a.parent];if(!i)return void console.log(`${o} newPair's parent not found.`);const l=[...i.children];-1===l.indexOf(a.id)&&(l.push(a.id),s["default"].set(i,"children",l)),s["default"].set(r,n,a),s["default"].set(e.unSavedPairs,i.id,!0),s["default"].set(e.unSavedPairs,a.id,!0),fe(e,a.id)},deletePairOld(e,t){if(!t)return;console.log(`deleting node ${t} and its children`);const a="deletePair mutation failed as",o=de.getters.currentPairs,r=o[t];if(!r)return;const n=o[r.parent];if(!n||!r.parent)return void console.log(`${a} pair's parent not found or pair itself is root. Cannot delete root.`);const i=n.children.filter(e=>e!==t);if(i.length<n.children.length&&(s["default"].set(n,"children",i),0===i.length)){const e=de.getters.collapsedPairs;n.id in e&&s["default"].delete(e,n.id)}const l=ve(o,t);l.push(t);const d=ye(o,l),c=e.files[e.currentFile];c.data?s["default"].set(c.data,"pairs",d):s["default"].set(c,"data",{pairs:d})},deletePair(e,{deletedPairIds:t,parentId:a,pairId:o}){const r=de.getters.currentPairs;t=t.map(e=>e.slice(1,-1));const n=ye(r,t),i=e.files[e.currentFile];i.data?s["default"].set(i.data,"pairs",n):s["default"].set(i,"data",{pairs:n});const l=r[a],d=de.getters.collapsedPairs;if(l){const e=l.children.filter(e=>e!==o);s["default"].set(l,"children",e),0===e.length&&l.id in d&&s["default"].delete(d,l.id)}for(const c of t)c in d&&s["default"].delete(d,c)},savePair(e,t){if(!t)return;const a=de.getters.currentPairs,o=a[t];o&&s["default"].delete(e.unSavedPairs,o.id)},addNewVar(e,t){const a=t&&t.newVar,o=t.addtoUnsaved,r="addNewVar mutation failed as",n=q.error;if(a)if(a.id)e.vars.push(a),(o||void 0===o)&&s["default"].set(e.unSavedVars,a.id,!0);else{const t=`${r} new variable id is empty. can't add it`;s["default"].set(e,"globalError",{alertText:t,alertType:n})}else{const t=`${r} new variable is empty. can't add it`;s["default"].set(e,"globalError",{alertText:t,alertType:n})}},setVars(e,t){s["default"].set(e,"vars",t)},deleteVar(e,t){const a=e.vars.findIndex(e=>e.id===t);a<0||e.vars.splice(a,1)},updateVar(e,t){const{extVar:a,index:o,addtoUnsaved:r}=t,n=q.error,i="error in updateVar.";if(o<0||o>=e.vars.length){const t=`${i} index ${o} is out of range. max = ${e.vars.length-1}`;s["default"].set(e,"globalError",{alertText:t,alertType:n})}else if(a.id)s["default"].set(e.vars,o,a),(r||void 0===r)&&s["default"].set(e.unSavedVars,a.id,!0);else{const t=`${i} variable '${a.varName}' does not have an id.`;s["default"].set(e,"globalError",{alertText:t,alertType:n})}},setInFlightVars(e){const t=Object(ee["cloneDeep"])(e.unSavedVars);s["default"].set(e,"inFlightVars",t),s["default"].set(e,"unSavedVars",{})},clearInFlightVars(e,t){if(t){const t=e.inFlightVars,a=Object.assign({},e.unSavedVars,t);s["default"].set(e,"unSavedVars",a)}s["default"].set(e,"inFlightVars",{})},setNlpIntents(e,t){s["default"].set(e,"nlpIntents",t)},saveNlpIntents(e,t){s["default"].delete(e,"NlpIntentsBeingSaved")},queueNlpIntents(e,t){Array.isArray(t)||(t=[t]);const a=[...e.NlpIntentsToSave,...t];s["default"].set(e,"NlpIntentsToSave",a)},clearNlpIntentsToSave(e){s["default"].set(e,"NlpIntentsToSave",[])},updateNlpIntents(e,{index:t,nlpIntent:a}){t<e.nlpIntents.length?s["default"].set(e.nlpIntents,t,a):e.nlpIntents.push(a)},setSaveInProgress(e,t){e.saveInProgress=t},setCallSaveLater(e,t){s["default"].set(e.callSaveLater,t,!0)},clearCallSaveLater(e){s["default"].set(e,"callSaveLater",{})},treeChangedParent(e,t){e.treeChangedParent=t,e.treeChanged+=1},setPairVersion(e,t){if(!t)return;const a=de.getters.currentPairs,o=a[t];if(!o)return;const r=j(JSON.stringify(o));console.log(`pair ${t} new version is ${r}`),s["default"].set(o,"previousVersion",o.version),s["default"].set(o,"version",r)},addToUnsavedPairs(e,t){if(!t)return;const a=de.getters.currentPairs,o=a[t];o&&s["default"].set(e.unSavedPairs,o.id,!0)},updateUserSays(e,t){let a=t.newUserSays;if(!a||!Array.isArray(a))return;a=a.filter(e=>e);const o=ge(e,t.pairId,"updateUserSays mutation failed");o&&(s["default"].set(o,"userSays",a),s["default"].set(e.unSavedPairs,o.id,!0))},updateBotSays(e,t){const a=t.newBotSays.filter(e=>e.type!==U.add),o=ge(e,t.pairId,"updateBotSays mutation failed");o&&(s["default"].set(o,"botSays",a),s["default"].set(e.unSavedPairs,o.id,!0))},addBotSaying(e,t){const a=de.getters.currentPairs[t.pairId];if(!a)return;const o=[...a.botSays,t.newBotSaying];s["default"].set(a,"botSays",o),s["default"].set(e.unSavedPairs,a.id,!0)},updateBotSaying(e,t){t.pairId,t.botSayingId;const a=de.getters.currentPairs[t.pairId];if(!a||t.botSayingId<0||t.botSayingId>=a.botSays.length)return;const o=Object(ee["cloneDeep"])(t.newBS);s["default"].set(a.botSays[t.botSayingId],t.bsPropName,o[t.bsPropName]),s["default"].set(e.unSavedPairs,a.id,!0)},updateBSLabel(e,t){const a=`updateBotSaying mutation failed for pair '${t.pairId}' and bsId '${t.botSayingId}'`,o=ge(e,t.pairId,a);if(!o||t.botSayingId<0||t.botSayingId>=o.botSays.length)return;let r=t.newBS.label;Object(ie["isArray"])(r)||(r=r&&[r]||[]),r=r.filter(e=>"object"===typeof e&&e.name),s["default"].set(o.botSays[t.botSayingId],"label",r),s["default"].set(e.unSavedPairs,o.id,!0)},updateBSTextData(e,t){const a=ge(e,t.pairId,"updateBSText mutation failed");if(!a)return;let o=t.newBS.data;Object(ie["isArray"])(o)||(o=o&&[o]||[""]),o=o.filter(e=>e),s["default"].set(a.botSays[t.botSayingId],"data",o),s["default"].set(e.unSavedPairs,a.id,!0)},updateBSChoiceData(e,t){const a=ge(e,t.pairId,"updateBSChoiceData mutation failed");if(!a)return;const o=t.newBS.data;switch(t.bsPropName){case"prompt":let r=o.prompt;Object(ie["isArray"])(r)||(r=r&&[r]||[""]),r=r.filter(e=>e),s["default"].set(a.botSays[t.botSayingId].data,t.bsPropName,r),s["default"].set(e.unSavedPairs,a.id,!0);break;case"choices":const n=o.choices.filter(e=>{return"string"===typeof e?e:e.title});s["default"].set(a.botSays[t.botSayingId].data,t.bsPropName,n),s["default"].set(e.unSavedPairs,a.id,!0);break;default:break}},updateBSHeroCardData(e,t){const a=ge(e,t.pairId,"updateBSHeroCardData mutation failed");if(!a)return;const o=t.newBS.data,r=a.botSays[t.botSayingId].data;switch(t.bsPropName){case"title":case"text":const n=o[t.bsPropName];n?s["default"].set(r,t.bsPropName,n):s["default"].delete(r,t.bsPropName),s["default"].set(e.unSavedPairs,a.id,!0);break;case"buttons":if(o.buttons&&o.buttons.length){const e=Object(ee["cloneDeep"])(o.buttons.filter(e=>e.type&&e.title&&e.value));e.length?s["default"].set(r,t.bsPropName,e):s["default"].delete(r,t.bsPropName)}else s["default"].delete(r,t.bsPropName);s["default"].set(e.unSavedPairs,a.id,!0);break;case"images":if(o.images&&o.images.length){const e=o.images.filter(e=>e.origUrl);e.length?s["default"].set(r,t.bsPropName,e):s["default"].delete(r,t.bsPropName)}else s["default"].delete(r,t.bsPropName);s["default"].set(e.unSavedPairs,a.id,!0);break;default:break}},updateBSCustomActionData(e,t){const a=ge(e,t.pairId,"updateBSCustomActionData mutation failed");if(!a)return;const o=t.newBS.data,r=a.botSays[t.botSayingId].data;switch(t.bsPropName){case"name":s["default"].set(r,t.bsPropName,o.name),s["default"].set(e.unSavedPairs,a.id,!0);break;case"inputs":const n=o.inputs.filter(e=>e);s["default"].set(r,t.bsPropName,n),s["default"].set(e.unSavedPairs,a.id,!0);break;default:break}},updateBSPickerData(e,t){const a=ge(e,t.pairId,"updateBSCustomActionData mutation failed");if(!a)return;const o=t.newBS.data,r=t.bsPropName,n=a.botSays[t.botSayingId].data;switch(t.bsPropName){case"qtyToPick":case"ratingsThreshold":case"pauseJumpNode":case"initialMessage":case"resumeMessage":case"redoMessage":case"itemTypes":case"itemType":s["default"].set(n,t.bsPropName,o[r]),s["default"].set(e.unSavedPairs,a.id,!0);break;case"ratings":const i=o[r].filter(e=>e.name);s["default"].set(n,t.bsPropName,i),s["default"].set(e.unSavedPairs,a.id,!0);break;case"items":const l=o[r].filter(e=>e.name);s["default"].set(n,t.bsPropName,l),s["default"].set(e.unSavedPairs,a.id,!0);break;default:break}},updateBSCaptureData(e,t){const a=ge(e,t.pairId,"updateBSCustomActionData mutation failed");if(!a)return;const o=t.newBS.data,r=t.bsPropName,n=a.botSays[t.botSayingId].data;switch(t.bsPropName){case"prompt":case"rePrompt":case"finalPrompt":s["default"].set(n,t.bsPropName,o[r]),s["default"].set(e.unSavedPairs,a.id,!0);break;case"rePromptChoices":case"finalPromptChoices":const i=o[r].filter(e=>e);s["default"].set(n,t.bsPropName,i),s["default"].set(e.unSavedPairs,a.id,!0);break;default:break}},updateBSTodoData(e,t){const a=ge(e,t.pairId,"updateBSCustomActionData mutation failed");if(!a)return;const o=t.newBS.data,r=t.bsPropName,n=a.botSays[t.botSayingId].data;switch(t.bsPropName){case"todoItem":case"deleted":s["default"].set(n,t.bsPropName,o[r]),s["default"].set(e.unSavedPairs,a.id,!0);break;case"tags":const i=o[r].filter(e=>e.tagName);s["default"].set(n,t.bsPropName,i),s["default"].set(e.unSavedPairs,a.id,!0);break;default:break}},copyTab(e,t){if(s["default"].set(e.copiedTabs,"length",0),!t||!t.pairId||void 0===t.botSayingId)return;const a=de.getters.currentPairs[t.pairId];if(!a)return;if(t.botSayingId<0||t.botSayingId>a.botSays.length-1)return;const o=Object(ee["cloneDeep"])(a.botSays[t.botSayingId]),r=e.copiedTabs.length;if(s["default"].set(e.copiedTabs,r,Object.assign({},t,{botSaying:o})),t.cut){const o=[...a.botSays];o.splice(t.botSayingId,1),s["default"].set(a,"botSays",o),s["default"].set(e.unSavedPairs,a.id,!0)}},pasteTab(e,t){if(!e.copiedTabs||!e.copiedTabs.length)return;const a=e.copiedTabs[0].botSaying;if(!a)return;if(!t||!t.pairId||void 0===t.botSayingId)return;const o=de.getters.currentPairs[t.pairId];if(!o)return;let r=t.botSayingId;r<0&&(r=0),r>o.botSays.length-1&&(r=o.botSays.length);const n=[...o.botSays];n.splice(r,0,a),s["default"].set(o,"botSays",n),s["default"].set(e.unSavedPairs,o.id,!0),s["default"].set(e.copiedTabs,"length",0)}},actions:{setGlobalError({commit:e},t){return le(this,void 0,void 0,function*(){e(ne.setGlobalError,{msg:t})})},setCurrentUser({commit:e,state:t},a){return le(this,void 0,void 0,function*(){e(ne.setCurrentUser,a)})},setCurrentPair({commit:e,state:t,dispatch:a},s){return le(this,void 0,void 0,function*(){yield a(ne.savePairs,""),e(ne.setCurrentPair,s)})},setCurrentPairTemp({commit:e,state:t,dispatch:a},s){return le(this,void 0,void 0,function*(){e(ne.setCurrentPairTemp,s)})},locateCurrentPair({commit:e},t){return le(this,void 0,void 0,function*(){e(ne.locateCurrentPair,t)})},updatePairProps({commit:e},t){return le(this,void 0,void 0,function*(){e(ne.updatePairProps,t)})},addNewPair({commit:e,state:t,dispatch:a},s){return le(this,void 0,void 0,function*(){if(!s||!s.parent)return void console.log("addNewPair action: please provide parent field in payload");const o=t.users[t.currentUser||""];o?o.token?P("ConversationNodes",o.token).then(a=>{if(!a)return void console.log("could not get a new id. cannot add new pair");const o={id:a,parent:s.parent,children:[],jumpToChildren:[],userSays:[],botSays:[],viable:!1,file:t.currentFile};console.log("addNewPair payload",{newPair:o}),e(ne.addNewPair,{newPair:o}),e(ne.treeChangedParent,s.parent)}).then(()=>{a(ne.savePairs,"")}).catch(e=>{console.log("error in retrieving next Id from server.")}):console.log("no user token found. can't request next Id"):console.log("no user found. can't request next Id")})},updateCollapsedPairs({commit:e,state:t,getters:a},s){return le(this,void 0,void 0,function*(){e(ne.updateCollapsedPairs,{pairs:a.currentPairs,pairId:s})})},changeParentNode({commit:e},t){return le(this,void 0,void 0,function*(){e(ne.changeParentNode,t),e(ne.treeChangedParent,t.newParentId)})},addJumpToNode({commit:e},t){return le(this,void 0,void 0,function*(){e(ne.addJumpToNode,t)})},deleteJumpToNode({commit:e,state:t,getters:a,dispatch:s},o){return le(this,void 0,void 0,function*(){e(ne.deleteJumpToNode,o);const t=a.currentPairs,r=t[o];if(r)try{s(ne.savePairs,"")}catch(e){console.log(`error committing jumpToNode delete to server- ${e}`)}})},deletePair({commit:e,state:t,getters:a},s){return le(this,void 0,void 0,function*(){const o="deletePair action failed: ",r=a.currentPairs,n=r[s];if(!n)return;const i=r[n.parent];if(i&&n.parent){try{const e=Pe(t);if(!e)return;const a=yield g(s,e);console.log(`response from deletePair= ${a}`)}catch(e){console.log("error deleting pair ")}e(ne.setCurrentPair,i.id)}else console.log(`${o} pair's parent not found or pair itself is root. Cannot delete root.`)})},treeChangedParent({commit:e},t){return le(this,void 0,void 0,function*(){e(ne.treeChangedParent,t)})},updateUserSays({commit:e,state:t},a){return le(this,void 0,void 0,function*(){e(ne.updateUserSays,a)})},updateBotSays({commit:e},t){return le(this,void 0,void 0,function*(){e(ne.updateBotSays,t)})},addBotSaying({commit:e},t){return le(this,void 0,void 0,function*(){e(ne.addBotSaying,t)})},updateBotSaying({commit:e},t){return le(this,void 0,void 0,function*(){e(ne.updateBotSaying,t)})},updateBSLabel({commit:e},t){return le(this,void 0,void 0,function*(){e(ne.updateBSLabel,t)})},updateBSTextData({commit:e},t){return le(this,void 0,void 0,function*(){e(ne.updateBSTextData,t)})},updateBSChoiceData({commit:e},t){return le(this,void 0,void 0,function*(){e(ne.updateBSChoiceData,t)})},updateBSHeroCardData({commit:e},t){return le(this,void 0,void 0,function*(){e(ne.updateBSHeroCardData,t)})},updateBSCustomActionData({commit:e},t){return le(this,void 0,void 0,function*(){e(ne.updateBSCustomActionData,t)})},updateBSPickerData({commit:e},t){return le(this,void 0,void 0,function*(){e(ne.updateBSPickerData,t)})},updateBSCaptureData({commit:e},t){return le(this,void 0,void 0,function*(){e(ne.updateBSCaptureData,t)})},updateBSTodoData({commit:e},t){return le(this,void 0,void 0,function*(){e(ne.updateBSTodoData,t)})},updateNlpIntents({commit:e},t){return le(this,void 0,void 0,function*(){e(ne.updateNlpIntents,t),e(ne.queueNlpIntents,t.nlpIntent)})},saveNlpIntents({commit:e,state:t}){return le(this,void 0,void 0,function*(){if(t.NlpIntentsBeingSaved.length)return;const a=t.users[t.currentUser||""];if(a)if(a.token)try{const s=t.NlpIntentsToSave;e(ne.clearNlpIntentsToSave);const o=yield b(s,a.token);console.log("data returned from postNlpIntents=",o),e(ne.saveNlpIntents)}catch(t){console.log("error returned from postPair=",t);const a=`${(new Date).toLocaleString()} `+`Error in saving NLP Intents. Error is ${JSON.stringify(t)}`;e(ne.setGlobalError,a)}else e(ne.setGlobalError,"no user token found. can't save NlpIntents to DB");else e(ne.setGlobalError,"no user found. can't save pair to DB")})},savePair({commit:e,state:t,dispatch:a},s){return le(this,void 0,void 0,function*(){a(ne.savePairs,s)})},savePairs({commit:e,state:t,dispatch:a},s){return le(this,void 0,void 0,function*(){const o=de.getters.currentPairs;let r;if(t.saveInProgress)e(ne.setCallSaveLater,s);else{const s=Object.keys(t.unSavedPairs),n=s.map(e=>o[e]).filter(e=>e&&e.id&&"undefined"!==e.id);if(console.log(`pairsToPost.length= ${n.length}`),n.length){r=yield be(n,e,t),console.log(`result from postPairsAndCommit= ${r}`),e(ne.setSaveInProgress,!1);const s=Object.keys(t.callSaveLater);if(s.length){for(const t of s)e(ne.addToUnsavedPairs,t);e(ne.clearCallSaveLater,""),a(ne.savePairs,"")}}}})},setNlpIntents({commit:e,state:t,dispatch:a},s){return le(this,void 0,void 0,function*(){const a=t.users[t.currentUser||""];if(!a)return void console.log("no user found. can't getPairsFromFileId");if(!a.token)return void console.log("no user token found. can't getPairsFromFileId");const{nlpIntents:o,msg:r}=yield x(s,a.token);r&&e(ne.setGlobalError,r),e(ne.setNlpIntents,o)})},setCurrentFile({commit:e,state:t,dispatch:a},s){return le(this,void 0,void 0,function*(){yield a(ne.savePairs,"");const o=t.users[t.currentUser||""];o?o.token?S(s,o.token).then(t=>{if(!t||0===Object.keys(t).length)return void console.log(`could not retrieve pairs for file ${s}.`);const a={name:s,fileSaved:!0,history:[],version:"0",data:{header:{module:"",goal:"",topic:""},pairs:t}};console.log("getFiles payload",a),e(ne.setCurrentFile,a)}):console.log("no user token found. can't getPairsFromFileId"):console.log("no user found. can't getPairsFromFileId")})},setVars({state:e,commit:t},a){return le(this,void 0,void 0,function*(){const s=e.users[e.currentUser||""];if(!s)return void console.log("no user found. can't getVars");if(!s.token)return void console.log("no user token found. can't getVars");const{vars:o,msg:r}=yield T(a,s.token);r?t(ne.setGlobalError,r):t(ne.setVars,o)})},addNewVar({commit:e,state:t,dispatch:a},s){return le(this,void 0,void 0,function*(){const a=t.users[t.currentUser||""];if(!a)return void e(ne.setGlobalError,"no user found. can't request next Id");if(!a.token)return void e(ne.setGlobalError,"no user token found. can't request next Id");const o=t.vars.filter(e=>e.varName===s.varName||e.id===s.id);if(o.length){const t=o[0];e(ne.setGlobalError,`new variable id '${s.id||""}' or name '${s.varName}'`+` is already present with id: '${t.id}' and name: '${t.varName}'. Can't add it`)}else P("external_variables",a.token).then(t=>{if(!t)return void e(ne.setGlobalError,"could not get a new id. cannot add new variable");const o={id:t,query:s.query,savedBy:a.email,savedOn:Date.now(),varName:s.varName,notes:s.notes||"",version:""};console.log("addNewVar payload",{newVar:o}),e(ne.addNewVar,{newVar:o})}).catch(t=>{e(ne.setGlobalError,"error in retrieving next Id from server. Unable to add new variable.")})})},updateVar({commit:e,state:t,dispatch:a},s){return le(this,void 0,void 0,function*(){const o=s.extVar,r=t.vars.filter(e=>o.varName===e.varName&&o.id!==e.id);if(r.length){const t=r[0];return void e(ne.setGlobalError,`variable Name '${t.varName}' already present on`+` variable with id '${t.id}'. Cannot insert a duplicate.`)}if(!o.id)return void a(ne.addNewVar,o);const n=t.vars.findIndex(e=>e.id===o.id);n<0?e(ne.setGlobalError,`updateVar received var with id ${o.id} but we can't find it in our list!`):o.varName||o.query?e(ne.updateVar,{extVar:o,index:n}):a(ne.deleteVar,{extVar:o,index:n})})},deleteVar({commit:e,state:t},a){return le(this,void 0,void 0,function*(){try{const s=Pe(t);if(!s)return;const o=t.vars.findIndex(e=>e.id===a.extVar.id);if(o<0)return;const r=yield f(a.extVar.id,s);console.log(`response from deleteVar= ${r}`)}catch(t){e(ne.setGlobalError,`error deleting var. ${t} `)}})},saveVars({commit:e,state:t,dispatch:a},s){return le(this,void 0,void 0,function*(){if(t.inFlightVars.length)return;const a=t.users[t.currentUser||""];if(!a)return void e(ne.setGlobalError,"no user found. can't save pair to DB");if(!a.token)return void e(ne.setGlobalError,"no user token found. can't save NlpIntents to DB");const s=t.vars.filter(e=>e.id in t.unSavedVars),o=[];for(let r of s){r=Object(ee["cloneDeep"])(r);const a=j(JSON.stringify(r));console.log(`var ${r.id} new version is ${r.version}`),r.version!==a&&(r.previousVersion=r.version),r.version=a;const s=t.vars.findIndex(e=>e.id===r.id);s<0||(o.push(r),e(ne.updateVar,{extVar:r,index:s}))}e(ne.setInFlightVars);try{const t=yield v(o,a.token);console.log("data returned from postVars=",t),e(ne.clearInFlightVars,!1)}catch(t){console.log("error returned from postPair=",t);const a=`${(new Date).toLocaleString()} `+`Error in saving NLP Intents. Error is ${JSON.stringify(t)}`;e(ne.clearInFlightVars,!0),e(ne.setGlobalError,a)}})},copyTab({commit:e},t){return le(this,void 0,void 0,function*(){e(ne.copyTab,t)})},pasteTab({commit:e},t){return le(this,void 0,void 0,function*(){e(ne.pasteTab,t)})}}});var ce=de;const ue=[];function pe(e){return de.getters.collapsedPairs}function he(e,t){console.log("collapsedPairs changed store watcher",e,t);const a=de.state.users[de.state.currentUser];a&&a.token&&h(a.state,a.token)}function ge(e,t,a){const s=e.files[e.currentFile];if(!s||!s.data)return console.log(`${a}. ${e.currentFile} not found`+" or data object within file is empty."),null;const o=s.data.pairs[t];return o}function fe(e,t){const a=de.getters.currentPairs,s=a[t];s&&s.id!==e.currentPair&&(e.currentPair=s.id),e.locateCurrentPair=!1}function me(e,t){if(!t)return s["default"].delete(e.users,e.currentUser),void(e.currentUser="");e.currentUser=t&&t.id,s["default"].set(e.users,t.id,t)}function be(e,t,a){return le(this,void 0,void 0,function*(){console.log(`about to postPairs and commit ${e.length} pairs`);const s=a.users[a.currentUser||""];if(!s)return console.log("no user found. can't save pair to DB"),!1;if(!s.token)return console.log("no user token found. can't save pair to DB"),!1;const o=[];for(const a of e){if(!a.file){const e=`pair ${a.id} does not have file attribute set. Cannot post it.`;return t(ne.setGlobalError,e),!1}t(ne.setPairVersion,a.id),t(ne.setSaveInProgress,!0);const e=Object.assign({},a);delete e.notSaved,o.push(e)}if(!o.length)return console.log("before sleep ",new Date),yield R(1e3),console.log("after sleep ",new Date),!0;const r=o.map(e=>e.id);try{const a=yield m(o,s.token);if(console.log("data returned from postPair=",a),a)for(const s of e)t(ne.savePair,s.id);return!0}catch(e){console.log("error returned from postPair=",e);const a=`${(new Date).toLocaleString()} `+`Error in saving pairs ${r}. Error is ${JSON.stringify(e)}`;return t(ne.setGlobalError,a),!1}})}function ve(e,t){const a=e[t];return a&&a.hasOwnProperty("children")?a.children.reduce((t,a)=>{return[...t,a,...ve(e,a)]},[]):[]}function ye(e,t){return e=Object.assign({},e),t.forEach(t=>delete e[t]),e}function Pe(e){const t=e.users[e.currentUser||""];if(t){if(t.token)return t.token;console.log("no user token found.")}else console.log("no user found. can't retrieve auth token.")}ue.push(de.watch(pe,he));var Se=a("DAYN"),Ie=a.n(Se),xe=this&&this.__decorate||function(e,t,a,s){var o,r=arguments.length,n=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,a,s);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(n=(r<3?o(n):r>3?o(t,a,n):o(t,a))||n);return r>3&&n&&Object.defineProperty(t,a,n),n},Te=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};let Ce=class extends te["Vue"]{constructor(){super(...arguments),this.searchBoxShortcutKey="Ctrl+F",this.saveShortcutKey="Ctrl+S",this.locateShortcutKey="Ctrl+L"}onContentChange(e,t){this.$refs.cediv[this.$props.contentType]=this.content}get ceClass(){const e={cediv:!0,"mr-1":!0,"pa-1":this.label,"pl-1":this.inLineLabel,breakWord:this.breakWord},t=Object.assign({},e,this.classes);return t}mounted(){this.$refs.cediv[this.$props.contentType]=this.content;const e=this.$store.state;e.keyboardShortcuts&&this.saveAction&&(i.add(this.saveShortcutKey,e=>{this.$refs.cediv.blur(),this.$store.dispatch(this.saveAction,"")},{type:"keydown",propagate:!1,target:this.$refs.cediv}),i.add(this.searchBoxShortcutKey,e=>{console.log("func passed to shortcut",e);const t=document.getElementById("search-text-field");t&&(t.focus(),t.scrollIntoView())},{type:"keydown",propagate:!1,target:this.$refs.cediv}))}beforeDestroy(){i.remove(this.searchBoxShortcutKey),i.remove(this.saveShortcutKey)}clearContent(e){let t=this.$refs.cediv;if(t&&(Array.isArray(t)||(t=[t]),t.length)){const a=t[0];if(a.innerHTML="",e)return;this.$emit("update",{innerHTML:a.innerHTML,innerText:a.innerText}),this.$emit("input",a.innerText)}}emitChange(e){const t=e.target;this.content!==t[this.$props.contentType]&&(this.trim&&(t[this.$props.contentType]=t[this.$props.contentType].trim()),this.$emit("update",{innerHTML:t.innerHTML,innerText:t.innerText}),this.$emit("input",t.innerText),this.resetOnEmit?this.$refs.cediv[this.$props.contentType]=this.content:this.clearOnEmit&&this.clearContent(!0))}};xe([Object(te["Prop"])({default:"Add text here.."}),Te("design:type",String)],Ce.prototype,"placeholder",void 0),xe([Object(te["Prop"])({required:!1,default:""}),Te("design:type",String)],Ce.prototype,"label",void 0),xe([Object(te["Prop"])({required:!1,default:""}),Te("design:type",String)],Ce.prototype,"inLineLabel",void 0),xe([Object(te["Prop"])({required:!1}),Te("design:type",Object)],Ce.prototype,"classes",void 0),xe([Object(te["Prop"])({required:!0,default:""}),Te("design:type",String)],Ce.prototype,"content",void 0),xe([Object(te["Prop"])({default:!0}),Te("design:type",Boolean)],Ce.prototype,"trim",void 0),xe([Object(te["Prop"])({default:!1}),Te("design:type",Boolean)],Ce.prototype,"clearOnEmit",void 0),xe([Object(te["Prop"])({default:!1}),Te("design:type",Boolean)],Ce.prototype,"resetOnEmit",void 0),xe([Object(te["Prop"])({default:ne.savePair}),Te("design:type",String)],Ce.prototype,"saveAction",void 0),xe([Object(te["Prop"])({default:!1}),Te("design:type",Boolean)],Ce.prototype,"showClose",void 0),xe([Object(te["Prop"])({default:!1}),Te("design:type",Boolean)],Ce.prototype,"breakWord",void 0),xe([Object(te["Prop"])({default:"innerText",validator:e=>-1!==["innerHTML","innerText"].indexOf(e)}),Te("design:type",String)],Ce.prototype,"contentType",void 0),xe([Object(te["Watch"])("content"),Te("design:type",Function),Te("design:paramtypes",[String,String]),Te("design:returntype",void 0)],Ce.prototype,"onContentChange",null),Ce=xe([Object(te["Component"])({model:{prop:"content"}})],Ce);var we=Ce,Ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:{"ce-root":e.label,"pa-0":!0,"ma-0":!0,"my-1":e.label||e.inLineLabel,"mx-0":e.label||e.inLineLabel}},[e.label?a("label",{class:"subheading px-1"},[e._v(e._s(e.label)+":")]):e._e(),a("div",{class:{inLineLabelContainer:e.inLineLabel,"mx-1":e.inLineLabel,"ce-root":!e.inLineLabel}},[e.inLineLabel?a("label",{staticClass:"inLineLabel mx-1"},[e._v(e._s(e.inLineLabel))]):e._e(),a("div",{ref:"cediv",class:e.ceClass,attrs:{contenteditable:"",placeholder:e.placeholder,empty:""},on:{keydown:function(e){e.stopPropagation()},blur:e.emitChange}}),e.showClose?a("v-icon",{staticClass:"close-ce",on:{click:e.clearContent}},[e._v("close")]):e._e()],1)])},ke=[];function Oe(e){a("hqEJ")}var $e=!1,je=Oe,_e="data-v-3660ed21",De=null,Re=Object(M["a"])(we,Ne,ke,$e,je,_e,De),Be=Re.exports,Ae=this&&this.__decorate||function(e,t,a,s){var o,r=arguments.length,n=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,a,s);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(n=(r<3?o(n):r>3?o(t,a,n):o(t,a))||n);return r>3&&n&&Object.defineProperty(t,a,n),n},Ee=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};let Fe=class extends te["Vue"]{constructor(){super(...arguments),this.newItem="",this.lCollapsed=this.collapsed,this.editableBody=null}get items(){let e=[""];return this.value.length&&(e=this.value.filter(e=>e).concat("")),e}updateItems(e,t){const a=e&&e[this.contentType]||"",s=[...this.items];s[t]=a.trim(),this.$emit("input",s)}itemsDnD(e){const t=e.oldIndex,a=e.newIndex;if(a===t)return;const s=[...this.items],o=s.splice(t,1);o.length&&s.splice(a,0,o[0]),this.$emit("input",s)}toggleExpand(){this.$emit("collapseClicked",this.lCollapsed),this.lCollapsed=!this.lCollapsed}};Ae([Object(te["Prop"])({default:"Add new entry here.."}),Ee("design:type",String)],Fe.prototype,"placeholder",void 0),Ae([Object(te["Prop"])({required:!0,default:()=>[""]}),Ee("design:type",Array)],Fe.prototype,"value",void 0),Ae([Object(te["Prop"])({default:"innerText",validator:e=>-1!==["innerHTML","innerText"].indexOf(e)}),Ee("design:type",String)],Fe.prototype,"contentType",void 0),Ae([Object(te["Prop"])(),Ee("design:type",String)],Fe.prototype,"header",void 0),Ae([Object(te["Prop"])({default:!1}),Ee("design:type",Boolean)],Fe.prototype,"collapsed",void 0),Ae([Object(te["Prop"])({default:!1}),Ee("design:type",Boolean)],Fe.prototype,"showClose",void 0),Ae([Object(te["Prop"])({default:!1}),Ee("design:type",Boolean)],Fe.prototype,"breakWord",void 0),Fe=Ae([Object(te["Component"])({components:{"content-editable":Be,draggable:Ie.a},watch:{}})],Fe);var Ve=Fe,Me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cea-root"},[e.header?a("label",{class:"subheading",on:{click:function(t){e.toggleExpand()}}},[e._v(e._s(e.header)+" ("+e._s(e.items.length-1)+")\n    "),e.lCollapsed?a("v-icon",{nativeOn:{click:function(t){e.toggleExpand()}}},[e._v("keyboard_arrow_down")]):a("v-icon",{nativeOn:{click:function(t){e.toggleExpand()}}},[e._v("keyboard_arrow_up")])],1):e._e(),a("div",{class:{white:!0,"py-1":!e.lCollapsed,"editable-array-body":!e.lCollapsed,"editable-array-body-collapsed":e.lCollapsed}},[a("draggable",{attrs:{value:e.items,options:{handle:".drag-handle"}},on:{update:e.itemsDnD}},e._l(e.items,function(t,s){return a("div",{key:s,class:"array-item ma-1"},[a("v-icon",{class:"drag-handle"},[e._v("reorder")]),a("content-editable",{class:"array-item-ce",attrs:{content:t,placeholder:e.placeholder,showClose:e.showClose,ripple:{"ce-ripple":!0},breakWord:e.breakWord},on:{update:function(t){return e.updateItems(t,s)}}})],1)}))],1)])},Le=[];function qe(e){a("8AWB")}var Ue=!1,Je=qe,ze="data-v-9c6182e2",We=null,He=Object(M["a"])(Ve,Me,Le,Ue,Je,ze,We),Ge=He.exports,Ke=this&&this.__decorate||function(e,t,a,s){var o,r=arguments.length,n=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,a,s);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(n=(r<3?o(n):r>3?o(t,a,n):o(t,a))||n);return r>3&&n&&Object.defineProperty(t,a,n),n},Qe=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};let Xe=class extends te["Vue"]{get userSays(){const e=this.currentPair;let t=[""];return e&&e.userSays&&(t=e.userSays.filter(e=>e).concat("")),t}set userSays(e){this.$store.dispatch(ne.updateUserSays,{pairId:this.pairId,newUserSays:e})}get currentPair(){return this.$store.getters.currentPairs[this.pairId]}};Ke([Object(te["Prop"])({required:!0}),Qe("design:type",String)],Xe.prototype,"pairId",void 0),Xe=Ke([Object(te["Component"])({components:{"content-editable-array":Ge,draggable:Ie.a}})],Xe);var Ye=Xe,Ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pl-2 pr-1 user-says"},[a("content-editable-array",{attrs:{showClose:!0,placeholder:"Add new 'user saying' here..."},model:{value:e.userSays,callback:function(t){e.userSays=t},expression:"userSays"}})],1)},et=[];function tt(e){a("g+rx")}var at=!1,st=tt,ot="data-v-2da0c063",rt=null,nt=Object(M["a"])(Ye,Ze,et,at,st,ot,rt),it=nt.exports,lt=this&&this.__decorate||function(e,t,a,s){var o,r=arguments.length,n=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,a,s);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(n=(r<3?o(n):r>3?o(t,a,n):o(t,a))||n);return r>3&&n&&Object.defineProperty(t,a,n),n},dt=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};let ct=class extends te["Vue"]{get bsLabel(){const e=[],t=this.botSaying;let a=t.label;return a||(a=e),Array.isArray(a)||(a=[a]),a}set bsLabel(e){this.$store.dispatch(ne.updateBSLabel,{pairId:this.pairId,botSayingId:this.botSayingId,bsPropName:"label",newBS:{label:e}})}get bsLabelString(){const e=this.bsLabel.map(e=>e.name);return e}set bsLabelString(e){const t=e.map(e=>{return{name:e,dataType:"string"}});this.bsLabel=t}get botSaying(){const e={type:U.text,data:[],isPrompt:!0,viable:!1,label:[{name:"",dataType:"string"}]},t=this.$store.getters.currentPairs,a=t[this.pairId],s=a&&a.botSays&&Object(ee["cloneDeep"])(a.botSays[this.botSayingId])||e;return s}};lt([Object(te["Prop"])({required:!0}),dt("design:type",String)],ct.prototype,"pairId",void 0),lt([Object(te["Prop"])({required:!0}),dt("design:type",Number)],ct.prototype,"botSayingId",void 0),ct=lt([Object(te["Component"])({components:{"content-editable-array":Ge}})],ct);var ut=ct,pt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("content-editable-array",{attrs:{header:"User Input Labels",placeholder:"Add new 'label'..."},model:{value:e.bsLabelString,callback:function(t){e.bsLabelString=t},expression:"bsLabelString"}})},ht=[];function gt(e){a("SzdN")}var ft=!1,mt=gt,bt="data-v-42f75384",vt=null,yt=Object(M["a"])(ut,pt,ht,ft,mt,bt,vt),Pt=yt.exports,St=this&&this.__decorate||function(e,t,a,s){var o,r=arguments.length,n=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,a,s);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(n=(r<3?o(n):r>3?o(t,a,n):o(t,a))||n);return r>3&&n&&Object.defineProperty(t,a,n),n},It=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};let xt=class extends te["Vue"]{get isPrompt(){return this.bsText&&this.bsText.isPrompt||!1}set isPrompt(e){const t=Object.assign({},this.bsText),a="isPrompt";t[a]=e,this.$store.dispatch(ne.updateBotSaying,{pairId:this.pairId,botSayingId:this.botSayingId,bsPropName:a,newBS:t})}get bsTextData(){console.log("in get botSaysText");const e=this.bsText;if(!e||e.type!==U.text)return[""];let t=e.data||[""];return Array.isArray(t)||(t=[t]),t}set bsTextData(e){console.log("setting computed prop bsTextData");const t=Object.assign({},this.bsText),a="data";t[a]=e,this.$store.dispatch(ne.updateBSTextData,{pairId:this.pairId,botSayingId:this.botSayingId,bsPropName:"data",newBS:t})}get bsText(){console.log("in get botSaysText");const e={type:U.text,data:[],isPrompt:!0,viable:!1,label:[]},t=this.$store.getters.currentPairs,a=t[this.pairId],s=a&&a.botSays&&Object(ee["cloneDeep"])(a.botSays[this.botSayingId])||e;return s}};St([Object(te["Prop"])({required:!0}),It("design:type",String)],xt.prototype,"pairId",void 0),St([Object(te["Prop"])({required:!0}),It("design:type",Number)],xt.prototype,"botSayingId",void 0),xt=St([Object(te["Component"])({components:{"content-editable-array":Ge,"bs-label":Pt},watch:{}})],xt);var Tt=xt,Ct=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pl-2 pr-1 bstext-holder"},[a("bs-label",{attrs:{pairId:e.pairId,botSayingId:e.botSayingId}}),a("div",{staticClass:"isPrompt"},[a("label",{attrs:{for:"text-prompt"}},[e._v("Prompt for user Input?")]),a("v-checkbox",{attrs:{id:"text-prompt","hide-details":""},model:{value:e.isPrompt,callback:function(t){e.isPrompt=t},expression:"isPrompt"}})],1),a("content-editable-array",{attrs:{header:"Text",placeholder:"Add new 'bot says' variation here..."},model:{value:e.bsTextData,callback:function(t){e.bsTextData=t},expression:"bsTextData"}})],1)},wt=[];function Nt(e){a("DjBn")}var kt=!1,Ot=Nt,$t="data-v-26f8111d",jt=null,_t=Object(M["a"])(Tt,Ct,wt,kt,Ot,$t,jt),Dt=_t.exports,Rt=this&&this.__decorate||function(e,t,a,s){var o,r=arguments.length,n=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,a,s);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(n=(r<3?o(n):r>3?o(t,a,n):o(t,a))||n);return r>3&&n&&Object.defineProperty(t,a,n),n},Bt=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};let At=class extends te["Vue"]{get choiceDataDefault(){const e={prompt:[""],options:{},choices:[""]};return e}get bsChoice(){const e={type:U.choice,data:this.choiceDataDefault,isPrompt:!0,viable:!1,label:[{name:"",dataType:"string"}]},t=this.$store.getters.currentPairs,a=t[this.pairId],s=a&&a.botSays&&Object(ee["cloneDeep"])(a.botSays[this.botSayingId])||e;return s}get bsChoicePrompt(){const e=this.bsChoice,t=e.data;return Array.isArray(t.prompt)||(t.prompt=[t.prompt]),t.prompt}set bsChoicePrompt(e){console.log("setting computed prop bsChoicePrompt"),this.setBsData(e,"prompt")}get bsChoiceChoices(){return this.bsChoice.data.choices}set bsChoiceChoices(e){console.log("setting computed prop bsChoiceChoices"),this.setBsData(e,"choices")}setBsData(e,t,a){console.log(`setting data prop '${t}'`),(!a||a&&a(e))&&this.$store.dispatch(ne.updateBSChoiceData,{pairId:this.pairId,botSayingId:this.botSayingId,bsPropName:t,newBS:{data:{[t]:e}}})}};Rt([Object(te["Prop"])({required:!0}),Bt("design:type",String)],At.prototype,"pairId",void 0),Rt([Object(te["Prop"])({required:!0}),Bt("design:type",Number)],At.prototype,"botSayingId",void 0),At=Rt([Object(te["Component"])({components:{"content-editable-array":Ge,"bs-label":Pt}})],At);var Et=At,Ft=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pl-2 pr-1"},[a("bs-label",{attrs:{pairId:e.pairId,botSayingId:e.botSayingId}}),a("content-editable-array",{attrs:{header:"Prompts",placeholder:"Add new 'prompt' variation here..."},model:{value:e.bsChoicePrompt,callback:function(t){e.bsChoicePrompt=t},expression:"bsChoicePrompt"}}),a("content-editable-array",{attrs:{header:"Choices",placeholder:"Add new 'choice' here..."},model:{value:e.bsChoiceChoices,callback:function(t){e.bsChoiceChoices=t},expression:"bsChoiceChoices"}})],1)},Vt=[];function Mt(e){a("mKbE")}var Lt=!1,qt=Mt,Ut="data-v-6db559e8",Jt=null,zt=Object(M["a"])(Et,Ft,Vt,Lt,qt,Ut,Jt),Wt=zt.exports,Ht=this&&this.__decorate||function(e,t,a,s){var o,r=arguments.length,n=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,a,s);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(n=(r<3?o(n):r>3?o(t,a,n):o(t,a))||n);return r>3&&n&&Object.defineProperty(t,a,n),n},Gt=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};let Kt=class extends te["Vue"]{constructor(){super(...arguments),this.newItem="",this.lCollapsed=this.collapsed,this.editableBody=null,this.menuDetails={x:0,y:0},this.showDeleteRowModal=!1,this.deleteRowPayload={confirm:"",index:-1}}get colNames(){if(this.valueColumns&&this.valueColumns.length)return this.valueColumns;{const e=[];for(let t=0;t<this.items.length;t++)e.push({colName:t+1});return e}}get items(){let e=[Object(ee["cloneDeep"])(this.lEmptyRow)];return this.value&&this.value.length&&(e=this.value.filter(e=>!this.lTestEmptyRow(e)).concat(e)),e}get lEmptyRow(){if(this.emptyRow)return this.emptyRow;const e={};for(const t of this.colNames){const a=t.colName?t.colName:t;"array"===t.type?e[a]=[]:e[a]=""}return e}deleteRow(e,t,a){this.lTestEmptyRow(t)||(this.deleteRowPayload.item=t,this.deleteRowPayload.index=a,this.menuDetails.x=e.clientX,this.menuDetails.y=e.clientY,this.showDeleteRowModal=!0,setTimeout(()=>{const e=document.getElementById("deleteRowTextField");e&&e.focus()},100))}deleteRowFromModal(){const{item:e,index:t}=this.deleteRowPayload,a=(this.deleteRowPayload.confirm||"").trim().toLowerCase();if("delete"===a||"delete*"===a)if(this.showDeleteRowModal=!1,this.deleteRowPayload.confirm="",this.emitOne)this.$emit("delete",{item:e,index:t});else{const e=this.items.filter((e,a)=>!this.lTestEmptyRow(e)&&a!==t);this.$emit("input",e)}else this.$store.commit(ne.setGlobalError,`Text entered '${a}' does not match expected text 'delete'. `+"Confirm you want to delete this row, by entering the word- delete -exactly (without the quotes).")}updateColItems(e,t,a){let s;s=e&&void 0!==e[this.contentType]?e[this.contentType]:e||"";const o=Object(ee["cloneDeep"])(this.items[t]);if(o[a]=s.trim(),this.emitOne)this.$emit("input",{item:o,index:t});else{let e=[...this.items];e[t]=o,e=e.filter(e=>!this.lTestEmptyRow(e)),this.$emit("input",e)}}itemsDnD(e){const t=e.oldIndex-1;let a=e.newIndex-1;if(-1===a&&(a=0),-1===t||a===t)return;const s=[...this.items],o=s.splice(t,1);o.length&&s.splice(a,0,o[0]),this.$emit("input",s)}toggleExpand(){this.$emit("collapseClicked",this.lCollapsed),this.lCollapsed=!this.lCollapsed}lTestEmptyRow(e){if(this.testEmptyRow&&"function"===typeof this.testEmptyRow)return this.testEmptyRow(e);let t=!0;for(const a of this.colNames){const s=a.colName?a.colName:a,o=e[s];if(Array.isArray(o)){if(o.length){t=!1;break}}else if(o){t=!1;break}}return t}};Ht([Object(te["Prop"])({default:"Add new entry here.."}),Gt("design:type",String)],Kt.prototype,"placeholder",void 0),Ht([Object(te["Prop"])({required:!0,default:()=>[""]}),Gt("design:type",Array)],Kt.prototype,"value",void 0),Ht([Object(te["Prop"])({required:!0,default:()=>[]}),Gt("design:type",Array)],Kt.prototype,"valueColumns",void 0),Ht([Object(te["Prop"])({required:!1}),Gt("design:type",Object)],Kt.prototype,"emptyRow",void 0),Ht([Object(te["Prop"])({required:!1}),Gt("design:type",Function)],Kt.prototype,"testEmptyRow",void 0),Ht([Object(te["Prop"])({default:"innerText",validator:e=>-1!==["innerHTML","innerText"].indexOf(e)}),Gt("design:type",String)],Kt.prototype,"contentType",void 0),Ht([Object(te["Prop"])(),Gt("design:type",String)],Kt.prototype,"header",void 0),Ht([Object(te["Prop"])({default:!1}),Gt("design:type",Boolean)],Kt.prototype,"emitOne",void 0),Ht([Object(te["Prop"])({default:!0}),Gt("design:type",Boolean)],Kt.prototype,"allowDrag",void 0),Ht([Object(te["Prop"])({default:!0}),Gt("design:type",Boolean)],Kt.prototype,"allowRowDelete",void 0),Ht([Object(te["Prop"])({default:!1}),Gt("design:type",Boolean)],Kt.prototype,"collapsed",void 0),Ht([Object(te["Prop"])({default:!1}),Gt("design:type",Boolean)],Kt.prototype,"showClose",void 0),Ht([Object(te["Prop"])({default:!1}),Gt("design:type",Boolean)],Kt.prototype,"breakWord",void 0),Kt=Ht([Object(te["Component"])({components:{"content-editable":Be,"ce-array":Ge,draggable:Ie.a},watch:{}})],Kt);var Qt=Kt,Xt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cea-root"},[e.header?a("label",{class:"subheading",on:{click:function(t){e.toggleExpand()}}},[e._v(e._s(e.header)+" ("+e._s(e.items.length-1)+")\n    "),e.lCollapsed?a("v-icon",{nativeOn:{click:function(t){e.toggleExpand()}}},[e._v("keyboard_arrow_down")]):a("v-icon",{nativeOn:{click:function(t){e.toggleExpand()}}},[e._v("keyboard_arrow_up")])],1):e._e(),a("table",{class:{white:!0,"py-1":!e.lCollapsed,table:!e.lCollapsed,"table-collapsed":e.lCollapsed}},[a("tbody",[a("draggable",{attrs:{value:e.items,options:{handle:".drag-handle"}},on:{update:e.itemsDnD}},[a("tr",[e.allowDrag?a("th",{staticClass:"small-cell"}):e._e(),e.allowRowDelete?a("th",{staticClass:"small-cell"}):e._e(),e._l(e.colNames,function(t,s){var o=t.colName,r=t.colDisplayName;return a("th",{key:s,staticClass:"px-1"},[e._v(e._s(r||o))])})],2),e._l(e.items,function(t,s){return a("tr",{key:s},[e.allowDrag?a("td",[a("v-icon",{class:"drag-handle"},[e._v("reorder")])],1):e._e(),e.allowRowDelete?a("td",[a("v-icon",{staticClass:"close-ce",on:{click:function(a){e.deleteRow(a,t,s)}}},[e._v("delete_forever")])],1):e._e(),e._l(e.colNames,function(o,r){var n=o.colName,i=o.colDisplayName,l=o.breakWord,d=o.clearOnEmit,c=o.resetOnEmit,u=o.saveAction,p=o.placeholderText,h=o.type,g=o.options;return a("td",{key:r},["selection"===h?a("select",{domProps:{value:t[n]},on:{change:function(t){return e.updateColItems(t.target.value,s,n)}}},e._l(g,function(s,o){return a("option",{key:o,domProps:{selected:s.value===t[n]||s===t[n],value:void 0===s.value?s:s.value}},[e._v(e._s(s.name||s))])})):"arraytest"===h?a("div",[e._v("\n              "+e._s(JSON.stringify(t[n],null,2))+"\n            ")]):"array"===h?a("ce-array",{attrs:{header:i||n,placeholder:p||e.placeholder},model:{value:t[n],callback:function(a){e.$set(t,n,a)},expression:"item[colName]"}}):"no-edit"===h?a("div",{staticClass:"px-1"},[e._v("\n              "+e._s(t[n])+"\n            ")]):a("content-editable",{staticClass:"mx-0 px-0",attrs:{content:t[n],classes:{"px-1":!e.lCollapsed,"py-1":!e.lCollapsed},placeholder:p||e.placeholder,showClose:e.showClose,clearOnEmit:d,resetOnEmit:c,saveAction:u,ripple:{"ce-ripple":!0},breakWord:l},on:{update:function(t){return e.updateColItems(t,s,n)}}})],1)})],2)})],2)],1)]),a("v-menu",{attrs:{"min-width":"25em","position-x":e.menuDetails.x,"position-y":e.menuDetails.y,"close-on-content-click":!1},model:{value:e.showDeleteRowModal,callback:function(t){e.showDeleteRowModal=t},expression:"showDeleteRowModal"}},[a("v-card",[a("v-card-title",[e._v("Delete Row")]),a("v-card-text",[a("v-text-field",{attrs:{label:"To confirm deleting row, type delete",id:"deleteRowTextField",required:""},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.deleteRowFromModal(t):null}},model:{value:e.deleteRowPayload.confirm,callback:function(t){e.$set(e.deleteRowPayload,"confirm",t)},expression:"deleteRowPayload.confirm"}})],1),a("v-card-actions",[a("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){return t.stopPropagation(),e.deleteRowFromModal(t)}}},[e._v("Delete Row")]),a("v-btn",{attrs:{flat:""},on:{click:function(t){t.stopPropagation(),e.showDeleteRowModal=!1}}},[e._v("Cancel")])],1)],1)],1)],1)},Yt=[];function Zt(e){a("e7d1")}var ea=!1,ta=Zt,aa="data-v-73caf03c",sa=null,oa=Object(M["a"])(Qt,Xt,Yt,ea,ta,aa,sa),ra=oa.exports,na=this&&this.__decorate||function(e,t,a,s){var o,r=arguments.length,n=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,a,s);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(n=(r<3?o(n):r>3?o(t,a,n):o(t,a))||n);return r>3&&n&&Object.defineProperty(t,a,n),n},ia=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};let la=class extends te["Vue"]{constructor(){super(...arguments),this.choicesMetadata=[{colName:"title",colDisplayName:"Display Text",placeholderText:"required: text displayed to user..."},{colName:"value",colDisplayName:"imBack Text",placeholderText:"optional: text posted back to Bot..."}],this.lChoicesComplex=this.bsChoice.data.choices||[],this.showAlert=!1,this.alertText="",this.alertType=q.error,this.setBsDataAction=ne.updateBSChoiceData}onPairIdChange(){console.log("pair Id changed in ConPairBSChoiceComplex"),this.lChoicesComplex=this.bsChoice.data.choices||[]}get choiceDataDefault(){const e={prompt:[""],options:{},choices:[]};return e}get bsChoice(){const e={type:U.choiceComplex,data:this.choiceDataDefault,isPrompt:!0,viable:!1,label:[{name:"",dataType:"string"}]},t=this.$store.getters.currentPairs,a=t[this.pairId],s=a&&a.botSays&&Object(ee["cloneDeep"])(a.botSays[this.botSayingId])||e;return s}get bsChoicePrompt(){const e=this.bsChoice,t=e.data;return Array.isArray(t.prompt)||(t.prompt=[t.prompt]),t.prompt}set bsChoicePrompt(e){this.setBsData(e,"prompt")}get emptyChoice(){return{tite:"",value:""}}get bsChoices(){return this.lChoicesComplex}set bsChoices(e){this.lChoicesComplex=e||[],this.setBsData(e,"choices",this.choiceRowsValid)}testEmptyChoice(e){return!e.title&&!e.value}closeAlert(){this.showAlert=!1,this.alertText=""}choiceRowsValid(e){for(const t of e)if(!this.testEmptyChoice(t)&&!t.title)return this.alertText="You must set the title as this is the text that is displayed to the user.",this.showAlert=!0,setTimeout(this.closeAlert,3e3),!1;return!0}setBsData(e,t,a){console.log(`setting data prop '${t}'`),(!a||a&&a(e))&&this.$store.dispatch(this.setBsDataAction,{pairId:this.pairId,botSayingId:this.botSayingId,bsPropName:t,newBS:{data:{[t]:e}}})}};na([Object(te["Prop"])({required:!0}),ia("design:type",String)],la.prototype,"pairId",void 0),na([Object(te["Prop"])({required:!0}),ia("design:type",Number)],la.prototype,"botSayingId",void 0),na([Object(te["Watch"])("pairId"),Object(te["Watch"])("botSayingId"),Object(te["Watch"])("$store.state.treeChanged"),ia("design:type",Function),ia("design:paramtypes",[]),ia("design:returntype",void 0)],la.prototype,"onPairIdChange",null),la=na([Object(te["Component"])({components:{"content-editable-array":Ge,"bs-label":Pt,"content-table":ra}})],la);var da=la,ca=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pl-2 pr-1 mb-2"},[a("bs-label",{attrs:{pairId:e.pairId,botSayingId:e.botSayingId}}),a("content-editable-array",{attrs:{header:"Prompts",placeholder:"Add new 'prompt' variation here..."},model:{value:e.bsChoicePrompt,callback:function(t){e.bsChoicePrompt=t},expression:"bsChoicePrompt"}}),a("v-alert",{staticClass:"alerts",attrs:{dismissible:!0,type:e.alertType,value:e.showAlert},on:{input:e.closeAlert}},[e._v(e._s(e.alertText))]),a("content-table",{attrs:{valueColumns:e.choicesMetadata,breakWord:!0,header:"Choices"},model:{value:e.bsChoices,callback:function(t){e.bsChoices=t},expression:"bsChoices"}})],1)},ua=[];function pa(e){a("/k2V")}var ha=!1,ga=pa,fa="data-v-21d475ee",ma=null,ba=Object(M["a"])(da,ca,ua,ha,ga,fa,ma),va=ba.exports,ya=this&&this.__decorate||function(e,t,a,s){var o,r=arguments.length,n=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,a,s);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(n=(r<3?o(n):r>3?o(t,a,n):o(t,a))||n);return r>3&&n&&Object.defineProperty(t,a,n),n},Pa=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};const Sa=[];for(const vn in U)isNaN(Number(vn))&&Sa.push(vn);let Ia=class extends te["Vue"]{constructor(){super(...arguments),this.items=[U.action,U.choice,U.choiceComplex,U.heroCard,U.picker,U.text,U.captureTextInput,U.todo],this.selectedItem=""}onClick(){if(this.selectedItem){console.log(`user selected ${this.selectedItem}`);const e={type:U.text,data:[],viable:!1};switch(e.type=this.selectedItem,this.selectedItem){case"action":e.data={name:"",inputs:[]};break;case"choice":e.data={prompt:[],choices:[]};break;case U.choiceComplex:e.data={prompt:[],choices:[]};break;case"heroCard":e.data={};break;case U.captureTextInput:e.data={prompt:"",rePrompt:"",rePromptChoices:[],finalPrompt:"",finalPromptChoices:[]};break;case U.todo:e.data={todoItem:"",deleted:!1,tags:[]};break;case"picker":e.data={qtyToPick:0,ratings:[],ratingsThreshold:0,itemTypes:"",itemType:"",items:[],initialMessage:"",resumeMessage:"",redoMessage:"",pauseJumpNode:""};break;default:break}this.$store.dispatch(ne.addBotSaying,{pairId:this.pairId,newBotSaying:e})}else console.log("please select a Bot-Saying type first")}};ya([Object(te["Prop"])({required:!0}),Pa("design:type",String)],Ia.prototype,"pairId",void 0),ya([Object(te["Prop"])({required:!0}),Pa("design:type",Number)],Ia.prototype,"botSayingId",void 0),Ia=ya([Object(te["Component"])({components:{}})],Ia);var xa=Ia,Ta=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pa-2",attrs:{id:"addBSTab"}},[a("div",{staticClass:"pa-2"},[a("v-select",{attrs:{dense:"",items:e.items,autocomplete:"",label:"Bot-Saying type","content-class":"addSelect",flat:""},model:{value:e.selectedItem,callback:function(t){e.selectedItem=t},expression:"selectedItem"}})],1),a("v-btn",{attrs:{color:"primary",depressed:"",small:""},on:{click:e.onClick}},[e._v("Add new Bot-Saying")])],1)},Ca=[];function wa(e){a("biZJ")}var Na=!1,ka=wa,Oa="data-v-5c3c21b7",$a=null,ja=Object(M["a"])(xa,Ta,Ca,Na,ka,Oa,$a),_a=ja.exports,Da=this&&this.__decorate||function(e,t,a,s){var o,r=arguments.length,n=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,a,s);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(n=(r<3?o(n):r>3?o(t,a,n):o(t,a))||n);return r>3&&n&&Object.defineProperty(t,a,n),n},Ra=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};let Ba=class extends te["Vue"]{constructor(){super(...arguments),this.buttonMetadata=[{colName:"type",type:"selection",options:[{name:"CHOOSE",value:""},"openUrl","imBack","postBack"]},{colName:"title",placeholderText:"required: text displayed to user..."},{colName:"value",breakWord:!0,placeholderText:"required: url to open or text posted back to Bot..."}],this.lButtons=this.bsHeroCard.data.buttons||[],this.lImages=this.bsHeroCard.data.images||[],this.lCollapsed=!1,this.showAlert=!1,this.alertText="",this.alertType=q.error}onPairIdChange(){console.log("pairId changed in bsHeroCard"),this.lButtons=this.bsHeroCard.data.buttons||[],this.lImages=this.bsHeroCard.data.images||[]}get heroCardDataDefault(){const e={};return e}get bsHeroCard(){const e={type:U.heroCard,data:{title:""},viable:!1},t=this.$store.getters.currentPairs,a=t[this.pairId],s=a&&a.botSays&&Object(ee["cloneDeep"])(a.botSays[this.botSayingId])||e;return s}get bsTitle(){const e=this.bsHeroCard.data.title||"";return e}set bsTitle(e){this.setBsData(e,"title")}get bsText(){const e=this.bsHeroCard.data.text||"";return e}set bsText(e){this.setBsData(e,"text")}get imageHeight(){const e=this.lImages,t=e&&e.length&&e[0].height||"120";return t}set imageHeight(e){let t=!0;this.lImages.length&&this.lImages[0].origUrl?this.setImageData(e,"height",t):(this.alertText="Please first set an image URL.",this.showAlert=!0,setTimeout(this.closeAlert,3e3),t=!1)}get imageUrl(){const e=this.lImages,t=e&&e.length&&e[0].origUrl||"";return t}set imageUrl(e){this.setImageData(e,"origUrl")}get emptyButton(){return{type:"",tite:"",value:""}}get bsButtons(){return this.lButtons}set bsButtons(e){this.lButtons=e||[],this.setBsData(e,"buttons",this.buttonRowsValid)}testEmptyButton(e){return!e.type&&!e.title&&!e.value}closeAlert(){this.showAlert=!1,this.alertText=""}buttonRowsValid(e){for(const t of e)if(console.log(`button= ${JSON.stringify(t)}`),!this.testEmptyButton(t)&&!t.type)return this.alertText="Please first CHOOSE a button type!",this.showAlert=!0,setTimeout(this.closeAlert,3e3),!1;return!0}setBsData(e,t,a){console.log(`in bsHeroCard. setting data prop '${t}'`),(!a||a&&a(e))&&this.$store.dispatch(ne.updateBSHeroCardData,{pairId:this.pairId,botSayingId:this.botSayingId,bsPropName:t,newBS:{data:{[t]:e}}})}getNewLibImage(){return{height:this.imageHeight,prevHeight:"0",origUrl:this.imageUrl,prevUrl:"",processedFileName:""}}setImageData(e,t,a=!0){const s=Object(ee["cloneDeep"])(this.bsHeroCard.data.images||[]);s.length||s.push(this.getNewLibImage()),s[0][t]=e,this.lImages=s,a&&this.setBsData(s,"images")}toggleExpand(){this.$emit("collapseClicked",this.lCollapsed),this.lCollapsed=!this.lCollapsed}};Da([Object(te["Prop"])({required:!0}),Ra("design:type",String)],Ba.prototype,"pairId",void 0),Da([Object(te["Prop"])({required:!0}),Ra("design:type",Number)],Ba.prototype,"botSayingId",void 0),Da([Object(te["Watch"])("pairId"),Object(te["Watch"])("botSayingId"),Object(te["Watch"])("$store.state.treeChanged"),Ra("design:type",Function),Ra("design:paramtypes",[]),Ra("design:returntype",void 0)],Ba.prototype,"onPairIdChange",null),Ba=Da([Object(te["Component"])({components:{"content-editable":Be,"bs-label":Pt,"content-table":ra}})],Ba);var Aa=Ba,Ea=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pl-2 pr-1 mb-2"},[a("bs-label",{attrs:{pairId:e.pairId,botSayingId:e.botSayingId}}),a("label",{class:"subheading",on:{click:function(t){e.toggleExpand()}}},[e._v("Image\n    "),e.lCollapsed?a("v-icon",{nativeOn:{click:function(t){e.toggleExpand()}}},[e._v("keyboard_arrow_down")]):a("v-icon",{nativeOn:{click:function(t){e.toggleExpand()}}},[e._v("keyboard_arrow_up")])],1),a("div",{class:{image:!e.lCollapsed,"image-collapsed":e.lCollapsed}},[a("content-editable",{attrs:{placeholder:"Set image-height here. Must be a number. E.g. 120",inLineLabel:"image resized height"},model:{value:e.imageHeight,callback:function(t){e.imageHeight=t},expression:"imageHeight"}}),a("content-editable",{attrs:{inLineLabel:"image URL",placeholder:"type/paste image url here...",breakWord:!0},model:{value:e.imageUrl,callback:function(t){e.imageUrl=t},expression:"imageUrl"}}),a("img",{directives:[{name:"show",rawName:"v-show",value:e.imageUrl,expression:"imageUrl"}],attrs:{src:e.imageUrl,height:e.imageHeight}})],1),a("content-editable",{attrs:{label:"Title",placeholder:"Add optional 'title' here..."},model:{value:e.bsTitle,callback:function(t){e.bsTitle=t},expression:"bsTitle"}}),a("content-editable",{attrs:{label:"Text",placeholder:"Add optional 'text' here..."},model:{value:e.bsText,callback:function(t){e.bsText=t},expression:"bsText"}}),a("v-alert",{staticClass:"alerts",attrs:{dismissible:!0,type:e.alertType,value:e.showAlert},on:{input:e.closeAlert}},[e._v(e._s(e.alertText))]),a("content-table",{attrs:{valueColumns:e.buttonMetadata,breakWord:!0,header:"Buttons"},model:{value:e.bsButtons,callback:function(t){e.bsButtons=t},expression:"bsButtons"}})],1)},Fa=[];function Va(e){a("9Tgt")}var Ma=!1,La=Va,qa="data-v-3cdb683e",Ua=null,Ja=Object(M["a"])(Aa,Ea,Fa,Ma,La,qa,Ua),za=Ja.exports,Wa=this&&this.__decorate||function(e,t,a,s){var o,r=arguments.length,n=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,a,s);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(n=(r<3?o(n):r>3?o(t,a,n):o(t,a))||n);return r>3&&n&&Object.defineProperty(t,a,n),n},Ha=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};let Ga=class extends te["Vue"]{get customActionDataDefault(){const e={name:"",inputs:[""]};return e}get bsCustomAction(){const e={type:U.action,data:this.customActionDataDefault,viable:!1},t=this.$store.getters.currentPairs,a=t[this.pairId],s=a&&a.botSays&&Object(ee["cloneDeep"])(a.botSays[this.botSayingId])||Object(ee["cloneDeep"])(e);return s}get bsName(){const e=this.bsCustomAction.data.name||"";return e}set bsName(e){console.log("setting computed prop bsName"),this.$store.dispatch(ne.updateBSCustomActionData,{pairId:this.pairId,botSayingId:this.botSayingId,bsPropName:"name",newBS:{data:{name:e}}})}get bsInputs(){return this.bsCustomAction.data.inputs}set bsInputs(e){console.log("setting computed prop bsChoiceChoices"),this.$store.dispatch(ne.updateBSCustomActionData,{pairId:this.pairId,botSayingId:this.botSayingId,bsPropName:"inputs",newBS:{data:{inputs:e}}})}};Wa([Object(te["Prop"])({required:!0}),Ha("design:type",String)],Ga.prototype,"pairId",void 0),Wa([Object(te["Prop"])({required:!0}),Ha("design:type",Number)],Ga.prototype,"botSayingId",void 0),Ga=Wa([Object(te["Component"])({components:{"content-editable":Be,"content-editable-array":Ge,"bs-label":Pt}})],Ga);var Ka=Ga,Qa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pl-2 pr-1 mb-2"},[a("bs-label",{attrs:{pairId:e.pairId,botSayingId:e.botSayingId}}),a("content-editable",{attrs:{label:"Name",placeholder:"Set custom action name..."},model:{value:e.bsName,callback:function(t){e.bsName=t},expression:"bsName"}}),a("content-editable-array",{attrs:{header:"Inputs",placeholder:"Add new action argument here..."},model:{value:e.bsInputs,callback:function(t){e.bsInputs=t},expression:"bsInputs"}})],1)},Xa=[];function Ya(e){a("eJZ5")}var Za=!1,es=Ya,ts="data-v-1aa79da3",as=null,ss=Object(M["a"])(Ka,Qa,Xa,Za,es,ts,as),os=ss.exports,rs=this&&this.__decorate||function(e,t,a,s){var o,r=arguments.length,n=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,a,s);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(n=(r<3?o(n):r>3?o(t,a,n):o(t,a))||n);return r>3&&n&&Object.defineProperty(t,a,n),n},ns=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};let is=class extends te["Vue"]{constructor(){super(...arguments),this.lRePromptChoices=this.bsCapture.data.rePromptChoices||[],this.lFinalPromptChoices=this.bsCapture.data.finalPromptChoices||[],this.showAlert=!1,this.alertText="",this.alertType=q.error}onPairIdChange(){this.lRePromptChoices=this.bsCapture.data.rePromptChoices||[],this.lRePromptChoices=this.bsCapture.data.finalPromptChoices||[]}get captureDataDefault(){const e={prompt:"",rePrompt:"",rePromptChoices:[],finalPrompt:"",finalPromptChoices:[]};return e}get bsCapture(){const e={type:U.captureTextInput,data:this.captureDataDefault,viable:!1},t=this.$store.getters.currentPairs,a=t[this.pairId],s=a&&a.botSays&&Object(ee["cloneDeep"])(a.botSays[this.botSayingId])||Object(ee["cloneDeep"])(e);return s}get bsPrompt(){const e=this.bsCapture.data.prompt||"";return e}set bsPrompt(e){console.log("setting computed prop bsPrompt"),this.setBsData(e,"prompt")}get bsRePrompt(){const e=this.bsCapture.data.rePrompt||"";return e}set bsRePrompt(e){console.log("setting computed prop bsRePrompt"),this.setBsData(e,"rePrompt")}get bsFinalPrompt(){const e=this.bsCapture.data.finalPrompt||"";return e}set bsFinalPrompt(e){console.log("setting computed prop bsFinalPrompt"),this.setBsData(e,"finalPrompt")}get bsRePromptChoices(){return[...this.lRePromptChoices]}set bsRePromptChoices(e){this.lRePromptChoices=[...e]||[],this.setBsData(this.lRePromptChoices,"rePromptChoices")}get bsFinalPromptChoices(){return[...this.lFinalPromptChoices]}set bsFinalPromptChoices(e){this.lFinalPromptChoices=[...e]||[],this.setBsData(this.lFinalPromptChoices,"finalPromptChoices")}setBsData(e,t,a){console.log(`in bsCapture. setting data prop '${t}'`),(!a||a&&a(e))&&this.$store.dispatch(ne.updateBSCaptureData,{pairId:this.pairId,botSayingId:this.botSayingId,bsPropName:t,newBS:{data:{[t]:e}}})}closeAlert(){this.showAlert=!1,this.alertText=""}};rs([Object(te["Prop"])({required:!0}),ns("design:type",String)],is.prototype,"pairId",void 0),rs([Object(te["Prop"])({required:!0}),ns("design:type",Number)],is.prototype,"botSayingId",void 0),rs([Object(te["Watch"])("pairId"),Object(te["Watch"])("botSayingId"),Object(te["Watch"])("$store.state.treeChanged"),ns("design:type",Function),ns("design:paramtypes",[]),ns("design:returntype",void 0)],is.prototype,"onPairIdChange",null),is=rs([Object(te["Component"])({components:{"content-editable":Be,"content-editable-array":Ge,"bs-label":Pt}})],is);var ls=is,ds=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pl-2 pr-1 mb-2"},[a("bs-label",{attrs:{pairId:e.pairId,botSayingId:e.botSayingId}}),a("content-editable",{attrs:{inLineLabel:"Prompt",placeholder:"initial prompt presented to the user before they start entering text."},model:{value:e.bsPrompt,callback:function(t){e.bsPrompt=t},expression:"bsPrompt"}}),a("content-editable",{attrs:{inLineLabel:"Re-Prompt",placeholder:"subsequent prompt presented to the user, to allow them to enter additional text."},model:{value:e.bsRePrompt,callback:function(t){e.bsRePrompt=t},expression:"bsRePrompt"}}),a("content-editable-array",{attrs:{placeholder:"Add new 'choice' here...",header:"Re-Prompt Choices"},model:{value:e.bsRePromptChoices,callback:function(t){e.bsRePromptChoices=t},expression:"bsRePromptChoices"}}),a("v-alert",{staticClass:"alerts",attrs:{dismissible:!0,type:e.alertType,value:e.showAlert},on:{input:e.closeAlert}},[e._v(e._s(e.alertText))]),a("content-editable",{attrs:{inLineLabel:"Final Prompt",placeholder:"final prompt presented to the user as final confirmation."},model:{value:e.bsFinalPrompt,callback:function(t){e.bsFinalPrompt=t},expression:"bsFinalPrompt"}}),a("content-editable-array",{attrs:{placeholder:"Add new 'choice' here...",header:"Final Prompt Choices"},model:{value:e.bsFinalPromptChoices,callback:function(t){e.bsFinalPromptChoices=t},expression:"bsFinalPromptChoices"}})],1)},cs=[];function us(e){a("3K3t")}var ps=!1,hs=us,gs="data-v-6838c90e",fs=null,ms=Object(M["a"])(ls,ds,cs,ps,hs,gs,fs),bs=ms.exports,vs=this&&this.__decorate||function(e,t,a,s){var o,r=arguments.length,n=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,a,s);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(n=(r<3?o(n):r>3?o(t,a,n):o(t,a))||n);return r>3&&n&&Object.defineProperty(t,a,n),n},ys=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};let Ps=class extends te["Vue"]{constructor(){super(...arguments),this.tagsMetadata=[{colName:"tagName",colDisplayName:"Tag Name",placeholderText:"required: one word name of tag"},{colName:"tagValue",colDisplayName:"Tag Value",placeholderText:"required: value of this tag"}],this.lTags=this.bsTodo.data.tags||[],this.showAlert=!1,this.alertText="",this.alertType=q.error,this.setBsDataAction=ne.updateBSTodoData}onPairIdChange(){console.log("pair Id changed in ConPairBSTodos"),this.lTags=this.bsTodo.data.tags||[]}get todoDataDefault(){const e={todoItem:"",tags:[],deleted:!1};return e}get bsTodo(){const e={type:U.todo,data:this.todoDataDefault,isPrompt:!0,viable:!1,label:[{name:"",dataType:"string"}]},t=this.$store.getters.currentPairs,a=t[this.pairId],s=a&&a.botSays&&Object(ee["cloneDeep"])(a.botSays[this.botSayingId])||e;return s}get bsTodoItem(){const e=this.bsTodo,t=e.data;return t.todoItem}set bsTodoItem(e){this.setBsData(e,"todoItem")}get emptyTag(){return{tagName:"",tagValue:""}}get bsTags(){return this.lTags}set bsTags(e){this.lTags=e||[],this.setBsData(e,"tags",this.tagRowsValid)}testEmptyTag(e){return!e.tagName&&!e.tagValue}closeAlert(){this.showAlert=!1,this.alertText=""}tagRowsValid(e){for(const t of e)if(!this.testEmptyTag(t)&&!t.tagName)return this.alertText="You must set the tagName for this tag to be saved.",this.showAlert=!0,setTimeout(this.closeAlert,3e3),!1;return!0}setBsData(e,t,a){console.log(`setting data prop '${t}'`),(!a||a&&a(e))&&this.$store.dispatch(this.setBsDataAction,{pairId:this.pairId,botSayingId:this.botSayingId,bsPropName:t,newBS:{data:{[t]:e}}})}};vs([Object(te["Prop"])({required:!0}),ys("design:type",String)],Ps.prototype,"pairId",void 0),vs([Object(te["Prop"])({required:!0}),ys("design:type",Number)],Ps.prototype,"botSayingId",void 0),vs([Object(te["Watch"])("pairId"),Object(te["Watch"])("botSayingId"),Object(te["Watch"])("$store.state.treeChanged"),ys("design:type",Function),ys("design:paramtypes",[]),ys("design:returntype",void 0)],Ps.prototype,"onPairIdChange",null),Ps=vs([Object(te["Component"])({components:{"content-editable":Be,"bs-label":Pt,"content-table":ra}})],Ps);var Ss=Ps,Is=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pl-2 pr-1 mb-2"},[a("bs-label",{attrs:{pairId:e.pairId,botSayingId:e.botSayingId}}),a("content-editable",{attrs:{inLineLabel:"Todo Text",placeholder:"todo text to save. Supports using variables and markdown."},model:{value:e.bsTodoItem,callback:function(t){e.bsTodoItem=t},expression:"bsTodoItem"}}),a("v-alert",{staticClass:"alerts",attrs:{dismissible:!0,type:e.alertType,value:e.showAlert},on:{input:e.closeAlert}},[e._v(e._s(e.alertText))]),a("content-table",{attrs:{valueColumns:e.tagsMetadata,breakWord:!0,header:"Context tags"},model:{value:e.bsTags,callback:function(t){e.bsTags=t},expression:"bsTags"}})],1)},xs=[];function Ts(e){a("14AH")}var Cs=!1,ws=Ts,Ns="data-v-57a940d9",ks=null,Os=Object(M["a"])(Ss,Is,xs,Cs,ws,Ns,ks),$s=Os.exports,js=this&&this.__decorate||function(e,t,a,s){var o,r=arguments.length,n=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,a,s);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(n=(r<3?o(n):r>3?o(t,a,n):o(t,a))||n);return r>3&&n&&Object.defineProperty(t,a,n),n},_s=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};let Ds=class extends te["Vue"]{constructor(){super(...arguments),this.itemMetadata=[{colName:"name",placeholderText:"required: one word name of the item"},{colName:"long",placeholderText:"optional: few words long description of the item, displayed to user"},{colName:"short",placeholderText:"optional: 2-3 words short description"}],this.ratingMetadata=[{colName:"name",placeholderText:"required: 1-3 word description of the rating"},{colName:"value",placeholderText:"required: number. 1 = low, n = high"}],this.lRatings=this.bsPicker.data.ratings||[],this.lItems=this.bsPicker.data.items||[],this.lCollapsed=!1,this.showAlert=!1,this.alertText="",this.alertType=q.error}onPairIdChange(){this.lItems=this.bsPicker.data.items||[],this.lRatings=this.bsPicker.data.ratings||[]}get pickerDataDefault(){const e={qtyToPick:5,qtyRangeLower:5,qtyRangeHigher:5,ratings:[],ratingsThreshold:0,itemTypes:"",itemType:"",items:[],initialMessage:"",resumeMessage:"",redoMessage:"",pauseJumpNode:""};return e}get bsPicker(){const e={type:U.picker,data:this.pickerDataDefault,viable:!1},t=this.$store.getters.currentPairs,a=t[this.pairId],s=a&&a.botSays&&Object(ee["cloneDeep"])(a.botSays[this.botSayingId])||Object(ee["cloneDeep"])(e);return s}get bsQtyToPick(){const e=this.bsPicker.data.qtyToPick||0;return`${e}`}set bsQtyToPick(e){console.log("setting computed prop bsQtyToPick"),this.updatePickerData("qtyToPick",parseInt(e,10))}get bsRatingsThreshold(){this.bsPicker.data.ratingsThreshold;return"bsRatingsThreshold"}set bsRatingsThreshold(e){console.log("setting computed prop bsRatingsThreshold"),this.updatePickerData("ratingsThreshold",parseInt(e,10))}get bsPauseJumpNode(){const e=this.bsPicker.data.pauseJumpNode||"";return e}set bsPauseJumpNode(e){console.log("setting computed prop bsPauseJumpNode"),this.updatePickerData("pauseJumpNode",e)}get bsInitialMessage(){const e=this.bsPicker.data.initialMessage||"";return e}set bsInitialMessage(e){console.log("setting computed prop bsInitialMessage"),this.updatePickerData("initialMessage",e)}get bsResumeMessage(){const e=this.bsPicker.data.resumeMessage||"";return e}set bsResumeMessage(e){console.log("setting computed prop bsResumeMessage"),this.updatePickerData("resumeMessage",e)}get bsRedoMessage(){const e=this.bsPicker.data.redoMessage||"";return e}set bsRedoMessage(e){console.log("setting computed prop bsRedoMessage"),this.updatePickerData("redoMessage",e)}get bsItemTypes(){const e=this.bsPicker.data.itemTypes||"";return e}set bsItemTypes(e){console.log("setting computed prop bsItemTypes"),this.updatePickerData("itemTypes",e)}get bsItemType(){const e=this.bsPicker.data.itemType||"";return e}set bsItemType(e){console.log("setting computed prop bsItemType"),this.updatePickerData("itemType",e)}get bsItems(){return this.lItems.map(e=>({name:e.name||"",short:e.short||"",long:e.long||""}))}set bsItems(e){this.lItems=e||[],this.setBsData(this.lItems,"items",this.itemRowsValid)}get bsRatings(){return this.lRatings.map(e=>({name:e.name||"",value:`${e.value?e.value:""}`}))}set bsRatings(e){const t=e||[];this.lRatings=t.map(e=>({name:e.name,value:parseInt(e.value,10)||0})),this.setBsData(this.lRatings,"ratings",this.ratingRowsValid)}updatePickerData(e,t){this.$store.dispatch(ne.updateBSPickerData,{pairId:this.pairId,botSayingId:this.botSayingId,bsPropName:e,newBS:{data:{[e]:t}}})}setBsData(e,t,a){console.log(`in bsPicker. setting data prop '${t}'`),(!a||a&&a(e))&&this.$store.dispatch(ne.updateBSPickerData,{pairId:this.pairId,botSayingId:this.botSayingId,bsPropName:t,newBS:{data:{[t]:e}}})}testEmptyItem(e){return!e.name&&!e.long&&!e.short}itemRowsValid(e){for(const t of e)if(console.log(`item= ${JSON.stringify(t)}`),!this.testEmptyItem(t)&&!t.name)return this.alertText="Please first set item's name!",this.$store.dispatch(ne.setGlobalError,this.alertText),!1;return!0}testEmptyRating(e){return!e.name&&!e.value}ratingRowsValid(e){for(const t of e)if(console.log(`rating= ${JSON.stringify(t)}`),!this.testEmptyRating(t)&&!t.name)return this.alertText="Please first set rating's name!",this.$store.dispatch(ne.setGlobalError,this.alertText),!1;return!0}closeAlert(){this.showAlert=!1,this.alertText=""}};js([Object(te["Prop"])({required:!0}),_s("design:type",String)],Ds.prototype,"pairId",void 0),js([Object(te["Prop"])({required:!0}),_s("design:type",Number)],Ds.prototype,"botSayingId",void 0),js([Object(te["Watch"])("pairId"),Object(te["Watch"])("botSayingId"),Object(te["Watch"])("$store.state.treeChanged"),_s("design:type",Function),_s("design:paramtypes",[]),_s("design:returntype",void 0)],Ds.prototype,"onPairIdChange",null),Ds=js([Object(te["Component"])({components:{"content-editable":Be,"content-table":ra,"bs-label":Pt}})],Ds);var Rs=Ds,Bs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pl-2 pr-1 mb-2"},[a("bs-label",{attrs:{pairId:e.pairId,botSayingId:e.botSayingId}}),a("content-editable",{attrs:{label:"QtyToPick",placeholder:"number: how many items must the user pick"},model:{value:e.bsQtyToPick,callback:function(t){e.bsQtyToPick=t},expression:"bsQtyToPick"}}),a("content-editable",{attrs:{label:"PauseJumpNode",placeholder:"node to jump to when user wants to pause the game"},model:{value:e.bsPauseJumpNode,callback:function(t){e.bsPauseJumpNode=t},expression:"bsPauseJumpNode"}}),a("content-editable",{attrs:{label:"ItemType (Plural)",placeholder:"what are we rating? e.g. Core values.. then, write 'Core values'"},model:{value:e.bsItemTypes,callback:function(t){e.bsItemTypes=t},expression:"bsItemTypes"}}),a("content-editable",{attrs:{label:"ItemType (Singular)",placeholder:"what are we rating? singular version. e.g. Core values.. then, write 'Core value'"},model:{value:e.bsItemType,callback:function(t){e.bsItemType=t},expression:"bsItemType"}}),a("content-table",{attrs:{valueColumns:e.ratingMetadata,header:"Ratings"},model:{value:e.bsRatings,callback:function(t){e.bsRatings=t},expression:"bsRatings"}}),a("content-editable",{attrs:{inLineLabel:"Initial Message",placeholder:"initial message presented to the user when they start the task."},model:{value:e.bsInitialMessage,callback:function(t){e.bsInitialMessage=t},expression:"bsInitialMessage"}}),a("content-editable",{attrs:{inLineLabel:"Resume Message",placeholder:"message to show user when they are returning to/resuming the task"},model:{value:e.bsResumeMessage,callback:function(t){e.bsResumeMessage=t},expression:"bsResumeMessage"}}),a("content-editable",{attrs:{inLineLabel:"Redo Message",placeholder:"message to show user if they come back in after completing it once"},model:{value:e.bsRedoMessage,callback:function(t){e.bsRedoMessage=t},expression:"bsRedoMessage"}}),a("v-alert",{staticClass:"alerts",attrs:{dismissible:!0,type:e.alertType,value:e.showAlert},on:{input:e.closeAlert}},[e._v(e._s(e.alertText))]),a("content-table",{attrs:{valueColumns:e.itemMetadata,header:"Items"},model:{value:e.bsItems,callback:function(t){e.bsItems=t},expression:"bsItems"}})],1)},As=[];function Es(e){a("S7ns")}var Fs=!1,Vs=Es,Ms="data-v-2046735b",Ls=null,qs=Object(M["a"])(Rs,Bs,As,Fs,Vs,Ms,Ls),Us=qs.exports,Js=this&&this.__decorate||function(e,t,a,s){var o,r=arguments.length,n=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,a,s);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(n=(r<3?o(n):r>3?o(t,a,n):o(t,a))||n);return r>3&&n&&Object.defineProperty(t,a,n),n},zs=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};let Ws=class extends te["Vue"]{constructor(){super(...arguments),this.activeTab="0",this.bsTabPrefix="bstab-",this.expandUserSaysTab=!0,this.expandBotSaysTab=!0,this.newTabIdPassedInProp=!0,this.lBSTypes=U,this.showDeleteTabModal=!1,this.deleteTabPayload={pairId:this.pairId,botSayingId:0,botSayingIdToDelete:0},this.showAlert=!1,this.alertText="",this.alertType=q.error,this.showMenuBsTab=!1,this.menuDetails={x:0,y:0,pairId:this.pairId},this.menu=[{title:"Copy Tab",action:this.copyTab},{title:"Cut Tab",action:this.cutTab}]}onPairIdChanged(e,t){console.log("component ConPairBotSays will receive props!"),this.curTab=this.activeTab,this.newTabIdPassedInProp=!0}get botSays(){console.log("in get botSays");const e=this.$props&&this.$props.pairId||"";if(!e)return[this.addNewBotSaying];const t=this.$store.getters.currentPairs,a=t[e];if(a.botSays){const e=a.botSays.filter(e=>e.type!==U.add).concat(this.addNewBotSaying);return e}return[this.addNewBotSaying]}get addNewBotSaying(){const e={type:U.add,data:{types:[U.choice,U.heroCard,U.text,U.action],defaultType:"text"},viable:!1};return e}get numTabs(){return this.botSays.length}get curTab(){return this.activeTab}set curTab(e){let t=parseInt(e,10)||0;const a=this.numTabs-1||-1;t=t>a?a:t,t=t<0?0:t,this.activeTab=t+""}mounted(){for(let e=0;e<10;e++)i.add(`Alt+${e+1}`,t=>this.scrollTabIntoView(e),{type:"keydown",propagate:!1,target:document})}updated(){if(this.newTabIdPassedInProp){console.log("about to call scroll into view after update");const e=parseInt(this.activeTab,10)||0;this.scrollTabIntoView(e)}}beforeDestroy(){for(let e=0;e<10;e++)i.remove(`Alt+${e}`)}openDeleteTabModal(e){console.log(`about to open modal dialog to delete tab botSayingId: ${e}, activeTab: ${this.activeTab}`),this.deleteTabPayload.botSayingId=e,this.deleteTabPayload.pairId=this.pairId,this.showDeleteTabModal=!0,setTimeout(()=>{const e=document.getElementById("deleteTabTextField");e&&e.focus()},100)}deleteTabFromModal(){this.showDeleteTabModal=!1,console.log("deleteTabPayload= ",this.deleteTabPayload);const{pairId:e,botSayingId:t,botSayingIdToDelete:a}=this.deleteTabPayload;if(this.deleteTabPayload.botSayingIdToDelete=0,a-1!==t)return this.alertText=`tab id ${a} does not match originally selected tab ${t+1}.`+`  To delete tab ${a}, select that tab first.`,this.showAlert=!0,void setTimeout(this.closeAlert,1e4);const s=this.botSays.filter((e,a)=>a!==t&&e.type!==U.add);this.$store.dispatch(ne.updateBotSays,{pairId:this.pairId,newBotSays:s})}openContextMenuTab(e,t){this.menuDetails.botSayingId=t,this.menuDetails.pairId=this.pairId,console.log("event is",e),this.menuDetails.x=e.clientX,this.menuDetails.y=e.clientY;const a=this.$store.state;if(a.copiedTabs.length){const e=this.menu.filter(e=>"Paste/Insert Tab"===e.title);e.length||this.menu.splice(0,0,{title:"Paste/Insert Tab",action:this.pasteTab})}else this.menu=this.menu.filter(e=>"Paste/Insert Tab"!==e.title);te["Vue"].nextTick(()=>{this.showMenuBsTab=!0})}menuClicked(e,t){"function"===typeof t.action&&t.action()}copyTab(){console.log(`copy tab clicked- ${this.menuDetails.botSayingId}`),this.menuDetails.cut=!1,this.$store.dispatch(ne.copyTab,this.menuDetails)}cutTab(){console.log(`cut tab clicked- ${this.menuDetails.botSayingId}`),this.menuDetails.cut=!0,this.$store.dispatch(ne.copyTab,this.menuDetails)}pasteTab(){console.log("paste tab clicked"),this.$store.dispatch(ne.pasteTab,this.menuDetails)}closeAlert(){this.showAlert=!1,this.alertText=""}tabMoved(e){this.curTab=e.newIndex.toString()}botSaysDnD(e){const t=e.oldIndex,a=e.newIndex;if(a===t)return;const s=[...this.botSays],o=s.splice(t,1);o.length&&s.splice(a,0,o[0]),this.$store.dispatch(ne.updateBotSays,{pairId:this.pairId,newBotSays:s})}scrollTabIntoView(e){let t=this.$refs[this.bsTabPrefix+(e+1)];if(t)if(Array.isArray(t)||(t=[t]),t.length){const e=t[0].$el,a=e.childNodes[0].childNodes[0];this.newTabIdPassedInProp=!1,a.click()}else console.log(`unable to scroll tab ${e} into view, no dom element found.`)}};Js([Object(te["Prop"])({required:!0}),zs("design:type",String)],Ws.prototype,"pairId",void 0),Js([Object(te["Watch"])("pairId",{deep:!0}),zs("design:type",Function),zs("design:paramtypes",[String,String]),zs("design:returntype",void 0)],Ws.prototype,"onPairIdChanged",null),Ws=Js([Object(te["Component"])({components:{draggable:Ie.a,"con-pair-bstext":Dt,"con-pair-bschoice":Wt,"con-pair-bschoice-complex":va,"con-pair-add":_a,"con-pair-bsherocard":za,"con-pair-bsaction":os,"con-pair-picker":Us,"con-pair-capture":bs,"con-pair-todos":$s}})],Ws);var Hs=Ws,Gs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-alert",{staticClass:"alerts",attrs:{dismissible:!0,type:e.alertType,value:e.showAlert},on:{input:e.closeAlert}},[e._v(e._s(e.alertText))]),a("v-card",{staticClass:"grey lighten-4 fullHeight"},[a("v-tabs",{staticClass:"bs-tab-container",attrs:{color:"blue lighten-4",id:"tabHeaders","show-arrows":"","hide-slider":""},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("draggable",{attrs:{value:e.botSays},on:{update:e.botSaysDnD,end:e.tabMoved}},e._l(e.botSays.length,function(t){return a("v-tab",{key:t,ref:e.bsTabPrefix+t,refInFor:!0,staticClass:"bs-tab-heading",attrs:{"active-class":"tabs__item--active bs-tab-heading-active"},on:{contextmenu:function(a){a.preventDefault(),e.openContextMenuTab(a,t-1)}}},[a("v-card",{staticClass:"bs-tab-card"},[a("v-card-text",[e._v("\n              "+e._s(t+" ("+e.botSays[t-1].type+")")+"\n              "),t<e.botSays.length?a("v-icon",{staticClass:"close-tab",on:{click:function(a){e.openDeleteTabModal(t-1)}}},[e._v("close")]):e._e()],1)],1)],1)})),e._l(e.numTabs,function(t){return a("v-tab-item",{key:t},[a("v-card",{staticClass:"bs-holder",attrs:{flat:""}},[e.botSays[t-1].type===e.lBSTypes.text?a("con-pair-bstext",{attrs:{pairId:e.pairId,botSayingId:t-1,botSaying:e.botSays[t-1]}}):e.botSays[t-1].type===e.lBSTypes.choice?a("con-pair-bschoice",{attrs:{pairId:e.pairId,botSayingId:t-1,botSaying:e.botSays[t-1]}}):e.botSays[t-1].type===e.lBSTypes.choiceComplex?a("con-pair-bschoice-complex",{attrs:{pairId:e.pairId,botSayingId:t-1,botSaying:e.botSays[t-1]}}):e.botSays[t-1].type===e.lBSTypes.heroCard?a("con-pair-bsherocard",{attrs:{pairId:e.pairId,botSayingId:t-1,botSaying:e.botSays[t-1]}}):e.botSays[t-1].type===e.lBSTypes.action?a("con-pair-bsaction",{attrs:{pairId:e.pairId,botSayingId:t-1,botSaying:e.botSays[t-1]}}):e.botSays[t-1].type===e.lBSTypes.picker?a("con-pair-picker",{attrs:{pairId:e.pairId,botSayingId:t-1,botSaying:e.botSays[t-1]}}):e.botSays[t-1].type===e.lBSTypes.captureTextInput?a("con-pair-capture",{attrs:{pairId:e.pairId,botSayingId:t-1,botSaying:e.botSays[t-1]}}):e.botSays[t-1].type===e.lBSTypes.todo?a("con-pair-todos",{attrs:{pairId:e.pairId,botSayingId:t-1,botSaying:e.botSays[t-1]}}):e.botSays[t-1].type===e.lBSTypes.add?a("con-pair-add",{attrs:{pairId:e.pairId,botSayingId:t-1,botSaying:e.botSays[t-1]}}):a("v-card-text",[e._v("\n            "+e._s("BotSaying '"+t+"': '"+JSON.stringify(e.botSays[t-1],null,2))+"\n          ")])],1)],1)})],2)],1),a("v-menu",{directives:[{name:"show",rawName:"v-show",value:e.showDeleteTabModal,expression:"showDeleteTabModal"}],attrs:{"offset-x":"",left:"",transition:"slide-x-transition","offset-overflow":"","max-width":"20em","min-width":"20em",activator:"#tabHeaders","close-on-content-click":!1},model:{value:e.showDeleteTabModal,callback:function(t){e.showDeleteTabModal=t},expression:"showDeleteTabModal"}},[a("v-card",[a("v-card-title",[e._v("Node "+e._s(e.deleteTabPayload.pairId)+", Tab "+e._s(e.deleteTabPayload.botSayingId+1))]),a("v-card-text",[a("v-text-field",{attrs:{label:"Confirm Tab Id (number)",id:"deleteTabTextField",required:""},on:{keyup:[function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,"Escape"))return null;e.showDeleteTabModal=!1},function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.deleteTabFromModal(t):null}]},model:{value:e.deleteTabPayload.botSayingIdToDelete,callback:function(t){e.$set(e.deleteTabPayload,"botSayingIdToDelete",t)},expression:"deleteTabPayload.botSayingIdToDelete"}})],1),a("v-card-actions",[a("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){return t.stopPropagation(),e.deleteTabFromModal(t)}}},[e._v("Delete Tab")]),a("v-btn",{attrs:{flat:""},on:{click:function(t){t.stopPropagation(),e.showDeleteTabModal=!1}}},[e._v("Cancel")])],1)],1)],1),a("v-menu",{directives:[{name:"show",rawName:"v-show",value:e.showMenuBsTab,expression:"showMenuBsTab"}],attrs:{"position-x":e.menuDetails.x,"position-y":e.menuDetails.y},model:{value:e.showMenuBsTab,callback:function(t){e.showMenuBsTab=t},expression:"showMenuBsTab"}},[a("v-list",{attrs:{dense:""}},e._l(e.menu,function(t){return a("v-list-tile",{key:t.title,on:{click:function(a){e.menuClicked(a,t)}}},[a("v-list-tile-title",[e._v(e._s(t.title))])],1)}))],1)],1)},Ks=[];function Qs(e){a("tUev"),a("tY/D")}var Xs=!1,Ys=Qs,Zs="data-v-6b837692",eo=null,to=Object(M["a"])(Hs,Gs,Ks,Xs,Ys,Zs,eo),ao=to.exports,so=this&&this.__decorate||function(e,t,a,s){var o,r=arguments.length,n=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,a,s);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(n=(r<3?o(n):r>3?o(t,a,n):o(t,a))||n);return r>3&&n&&Object.defineProperty(t,a,n),n},oo=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};let ro=class extends te["Vue"]{constructor(){super(...arguments),this.newTabIdPassedInProp=!0,this.expandUserSaysTab=!0,this.expandBotSaysTab=!0}get pair(){const e=this.$store.getters.currentPairs;return e[this.pairId]}get unSavedPairs(){return this.$store.state.unSavedPairs}get notSaved(){const e=this.pair;return!!e&&e.id in this.unSavedPairs}get trackVisits(){return this.pair&&this.pair.trackVisits||!1}set trackVisits(e){this.$store.dispatch(ne.updatePairProps,{pairId:this.pairId,propName:"trackVisits",propValue:e})}get gatherFeedback(){return this.pair&&this.pair.gatherFeedback||!1}set gatherFeedback(e){this.$store.dispatch(ne.updatePairProps,{pairId:this.pairId,propName:"gatherFeedback",propValue:e})}get showPairDetails(){const e=this.pair&&this.pair.id===this.$props.pairId;return e}savePair(){this.$store.dispatch(ne.savePair,this.pairId)}};so([Object(te["Prop"])({required:!0,default:""}),oo("design:type",String)],ro.prototype,"pairId",void 0),so([Object(te["Prop"])({default:"0"}),oo("design:type",String)],ro.prototype,"pActiveTab",void 0),ro=so([Object(te["Component"])({components:{"content-editable":Be,"con-pair-user-says":it,"con-pair-bot-says":ao,draggable:Ie.a}})],ro);var no=ro,io=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"conPair"},[e.showPairDetails?a("v-card",[a("v-card-title",{staticClass:"py-1 px-2"},[a("div",{staticClass:"pair-heading"},[a("div",{staticClass:"subheading node-title dark primary px-1",on:{click:function(t){e.expandUserSaysTab=!1,e.expandBotSaysTab=!1}}},[e._v("\n          Node: "+e._s(e.pair.id))]),a("v-btn",{staticClass:"button",class:{notSaved:e.notSaved,saved:!e.notSaved},attrs:{icon:"",small:"",tabindex:"0"},on:{click:e.savePair}},[a("v-icon",[e._v("save")])],1),e.pair.savedBy?a("div",{staticClass:"grey--text"},[e._v("saved by: "+e._s(e.pair.savedBy)+" / "+e._s(e.pair.savedOn))]):e._e()],1)]),a("div",{staticClass:"switches ml-2"},[a("v-switch",{attrs:{label:"Track visits","hide-details":""},model:{value:e.trackVisits,callback:function(t){e.trackVisits=t},expression:"trackVisits"}}),a("v-switch",{attrs:{label:"Gather Feedback","hide-details":""},model:{value:e.gatherFeedback,callback:function(t){e.gatherFeedback=t},expression:"gatherFeedback"}})],1),a("v-expansion-panel",{attrs:{expand:"",focusable:""}},[a("v-expansion-panel-content",{staticClass:"pair-data-holder",model:{value:e.expandUserSaysTab,callback:function(t){e.expandUserSaysTab=t},expression:"expandUserSaysTab"}},[a("div",{staticClass:"subheading",attrs:{slot:"header"},slot:"header"},[e._v("When the user says:")]),a("con-pair-user-says",{attrs:{pairId:e.pairId}})],1),a("v-expansion-panel-content",{staticClass:"pair-data-holder",model:{value:e.expandBotSaysTab,callback:function(t){e.expandBotSaysTab=t},expression:"expandBotSaysTab"}},[a("div",{staticClass:"subheading",attrs:{slot:"header"},slot:"header"},[e._v("The bot will respond with ("+e._s(e.pair.botSays.length)+" tabs):")]),a("con-pair-bot-says",{attrs:{pairId:e.pairId}})],1)],1)],1):e._e()],1)},lo=[];function co(e){a("KAXf"),a("j2xv")}var uo=!1,po=co,ho="data-v-bdf9496c",go=null,fo=Object(M["a"])(no,io,lo,uo,po,ho,go),mo=fo.exports,bo=a("HRak"),vo=a("9j4o"),yo=a("8soT"),Po=a("PAQ2"),So=a("eJxA"),Io=this&&this.__decorate||function(e,t,a,s){var o,r=arguments.length,n=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,a,s);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(n=(r<3?o(n):r>3?o(t,a,n):o(t,a))||n);return r>3&&n&&Object.defineProperty(t,a,n),n},xo=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};vo["f"].prototype.transition||(vo["f"].prototype.transition=Po["b"]),vo["g"].prototype.transition||(vo["g"].prototype.transition=Po["b"]);let To=class extends te["Vue"]{constructor(){super(...arguments),this.width=1,this.height=1,this.maxLabelLengths=[8],this.svg=Object(vo["f"])("#svgTree"),this.tree=Object(bo["b"])(),this.debouncedResize=Object(ee["debounce"])(this.handleResize),this.mouseOverWaitDuration=300,this.mouseOverWaitHandle=null,this.radius=.4*this.fontSize,this.zoomBehavior=null,this.rootInternal=null,this.hoverDisabled=!1,this.showAlert=!1,this.alertText="",this.alertType=q.error,this.showMenu=!1,this.menuDetails={x:0,y:0},this.menu=[{title:"Toggle Node",action:this.toggleNodeFromMenu},{title:"Change parent node",action:this.changeParentNode},{title:"Create child node",action:this.addChildNode},{title:"Add jump-to node",action:this.addJumpToNode},{title:"Delete node",action:this.deleteNode}],this.showDeleteNodeModal=!1,this.deleteNodePayload={pairIdToDelete:"",pair:this.pair},this.showChangeParentModal=!1,this.changeParentPayload={newParentId:this.pair&&this.pair.parent,pair:this.pair},this.showAddJumpToNodeModal=!1,this.addJumpToNodePayload={pairId:"",jumpToNodeId:""}}onCurrentPairChange(e){const t=this.nodes.filter(e=>e.id===this.pairId);if(t&&t.length){const e="x"in t[0];if(console.log("fastUpdate=",e),this.root){this.updateTree(this.root,e);const t=this.$store.state;t.locateCurrentPair&&this.scrollNodeIntoView(this.pairId)}}}onUnSavedPairsChange(){console.log("unSavedPairs changed!"),this.root&&(this.updateCollapsedPairsPostD3(this.root),this.updateTree(this.root,!1))}onCurrentFileChange(){console.log("current file changed"),this.rootInternal=null,this.root&&(this.updateCollapsedPairsPostD3(this.root),this.updateTree(this.root,!1))}onTreeChanged(e){if(console.log(`tree changed! newVersion= ${e}`),this.root){this.updateCollapsedPairsPostD3(this.root);const e=this.$store.state;let t=this.root;if(e.treeChangedParent){const a=this.nodes.filter(t=>t.id===e.treeChangedParent);a&&a.length&&(t=a[0])}this.hoverDisabled=!0,this.updateTree(t,!1),setTimeout(()=>{this.hoverDisabled=!1},this.duration)}}get collapsedPairs(){return console.log("local get collapsedPairs called"),this.$store.getters.collapsedPairs}get currentFile(){return this.$store.state.currentFile}get pairs(){console.log("in Tree get pairs");const e=this.$store.getters.currentPairs;return e}get pairId(){const e=this.$store.getters.currentPair,t=e&&e.id||"";return t}set pairId(e){this.$store.dispatch(ne.setCurrentPair,e)}get pair(){return this.$store.getters.currentPair}get pairsArray(){const e=[];for(const t of Object.values(this.pairs)){const a=Object.assign({},t);e.push(a),a.children=[...a.children,...a.jumpToChildren||[]],a.jumpToChildren&&e.push(...this.addJumpToChildren(a))}return console.log("in get pairsArray",e.length),e}get root(){if(console.log("updating root"),!this.pairsArray.length)return this.rootInternal;const e=Object(bo["a"])().id(e=>e.id).parentId(e=>e.parent)(this.pairsArray);return this.rootInternal?(e.x0=this.rootInternal.x0,e.y0=this.rootInternal.y0):(e.x0=this.height/2,e.y0=0),this.rootInternal=e,this.rootInternal}set root(e){console.log("setting root"),this.rootInternal=e}get nodes(){if(!this.root)return[];const e=this.root.descendants();return e}get links(){if(!this.root)return[];const e=this.root.links();return e}get centerPosition(){return{x:this.fontSize*this.maxLabelLengths[0],y:this.height/2}}get unSavedPairs(){return this.$store.state.unSavedPairs}mounted(){this.$store.state;te["Vue"].nextTick(()=>{window&&window.addEventListener("resize",this.debouncedResize,!1),this.handleResize(),this.tree||(this.tree=Object(bo["b"])()),this.tree.nodeSize([1.4*this.fontSize,this.maxLabelLengths[0]*this.fontSize]),this.tree.separation((e,t)=>{return"jumpToNode"===e.data.type&&"jumpToNode"===t.data.type?1.2:e.parent===t.parent?1:2}),this.svg=Object(vo["f"])("#svgTree"),this.zoomBehavior=Object(So["a"])().scaleExtent([.1,2]).on("zoom",this.handleZoom),this.svg.call(this.zoomBehavior),this.svg.call(this.zoomBehavior.transform,So["b"].translate(this.centerPosition.x,this.centerPosition.y));const e=this.root;e&&this.updateTree(e)})}beforeDestroy(){window&&window.removeEventListener("resize",this.debouncedResize,!1)}updateCollapsedPairsPostD3(e){console.log("in hydrateCollapsedPairs");const t=this.$store.getters.collapsedPairs,a=[e];while(a.length){const s=a.pop();if(!s)continue;const o=s.id||"",r=s.children||e._children;if(r&&o in t&&(console.log(`collapsing pair ${o}`),s._children=r,s.children=null),r)for(const e of r)"jumpToNode"!==e.data.type&&a.push(e)}}addChildNode(e){console.log("Create child node at ",e.id);const t=e.data.jumpToChildren&&e.data.jumpToChildren.length||0;if(t)return this.alertText=`Node ${e.id} already has a jumpTo node. `+"To add children to this node, first remove the jumpTo node.",this.showAlert=!0,void setTimeout(this.closeAlert,1e4);this.$store.dispatch(ne.addNewPair,{parent:e.id})}deleteNode(e){"jumpToNode"!==e.data.type?(this.deleteNodePayload.pair=this.pairs[e.id||""],this.showDeleteNodeModal=!0,setTimeout(()=>{const e=document.getElementById("deleteNodeTextField");e&&e.focus()},100)):"jumpToNode"===e.data.type&&e.parent&&e.parent.id&&this.$store.dispatch(ne.deleteJumpToNode,e.parent.id)}addJumpToNode(e){console.log("adding jumpToNode");const t=e.data.jumpToChildren&&e.data.jumpToChildren.length;if(t){const t=e.data.jumpToChildren[0];return this.alertText=`Node ${e.id} is already jumping to ${t}. `+`To jump to a different node, delete existing node: ${e.id}${t} and then, add new node.`,this.showAlert=!0,void setTimeout(this.closeAlert,1e4)}this.addJumpToNodePayload.pairId=e.id||"",this.addJumpToNodePayload.jumpToNodeId="",this.showAddJumpToNodeModal=!0,setTimeout(()=>{const e=document.getElementById("jumpToNodeIdTextField");e&&e.focus()},100)}addJumpToNodeFromModal(){if(this.addJumpToNodePayload.jumpToNodeId){const e=Object.assign({},this.addJumpToNodePayload);this.$store.dispatch(ne.addJumpToNode,e),this.addJumpToNodePayload.jumpToNodeId=""}this.showAddJumpToNodeModal=!1}deleteNodeFromModal(){const e=this.deleteNodePayload.pair;if(!e||e.id!==this.deleteNodePayload.pairIdToDelete)return this.alertText=`Node id '${e.id}' does not match entered text '${this.deleteNodePayload.pairIdToDelete}'. `+"Confirm you want to delete this node, by entering it's node id exactly.",this.showAlert=!0,void setTimeout(this.closeAlert,1e4);this.$store.dispatch(ne.deletePair,e.id),this.showDeleteNodeModal=!1}changeParentNode(e){console.log("changing parent node"),this.changeParentPayload.pair=this.pairs[e.id||""],this.changeParentPayload.newParentId="",this.showChangeParentModal=!0,setTimeout(()=>{const e=document.getElementById("changeParentNodeTextField");e&&e.focus()},100)}changeParentNodeFromModal(){if(this.changeParentPayload.newParentId){const e=this.changeParentPayload&&Object.assign({},this.changeParentPayload);this.$store.dispatch(ne.changeParentNode,e),this.changeParentPayload.newParentId=""}this.showChangeParentModal=!1}prepMenu(e,t,a){vo["b"].preventDefault(),this.showMenu=!1,this.menuDetails.x=vo["b"].clientX,this.menuDetails.y=vo["b"].clientY,this.menuDetails.d=e,this.menuDetails.i=t,te["Vue"].nextTick(()=>{this.showMenu=!0})}menuClicked(e,t){"function"===typeof t.action&&t.action(this.menuDetails.d,this.menuDetails.i)}addJumpToChildren(e){const t=[],a=e.jumpToChildren;if(a&&a.length)for(let s=0;s<a.length;s++){const a=e.jumpToChildren[s],o=`${e.id}${a}`,r={id:o,parent:e.id,origId:a,type:"jumpToNode",children:[],userSays:[],botSays:[],viable:!0};t.push(r)}return t}getLinkPath(e){const t=Object(yo["a"])().x(e=>e.y||0).y(e=>e.x||0)(e);return t}handleResize(){const e=this.$refs.treeDiv;this.width=Math.floor(e.clientWidth)-1,this.height=Math.floor(e.clientHeight)-1}handleZoom(){Object(vo["f"])("#rootG").attr("transform",vo["b"].transform)}toggleNodeFromMenu(e){const t=e.children||e._children;t&&t.length&&"jumpToNode"===t[0].data.type||(t&&t.length?(e.children?(e._children=e.children,e.children=null):e._children&&(e.children=e._children,e._children=null),this.updateTree(e),this.$store.dispatch(ne.updateCollapsedPairs,e.id)):e.data.id in this.collapsedPairs&&this.$store.dispatch(ne.updateCollapsedPairs,e.id))}toggleNode(e,t){vo["b"].stopPropagation(),this.toggleNodeFromMenu(e)}selectNode(e,t){"jumpToNode"===e.data.type?this.pairId=e.parent.id:this.pairId=e.id}getAbsolutePosFromRelPos({relX:e=0,relY:t=0}){const a=Object(So["c"])(this.svg.node()),s=a.k||1,o=a.x||0,r=a.y||0,n=o+e*s,i=r+t*s;return{absX:n,absY:i,scale:s}}scrollNodeIntoView(e){const t=this.svg.select(`#node_${e}`);if(!t)return void console.log("returning from scrollNode");const a=t.attr("data-x")||0,s=t.attr("data-y")||0,{absX:o,absY:r,scale:n}=this.getAbsolutePosFromRelPos({relX:a,relY:s}),i=this.pair&&this.pair.parent?1.6*this.centerPosition.x:this.centerPosition.x,l=i-o,d=this.centerPosition.y-r;this.svg.transition().duration(this.duration).call(this.zoomBehavior.translateBy,l/n,d/n)}onMouseOver(e){this.hoverDisabled||(this.mouseOverWaitHandle=setTimeout(()=>{this.$store.dispatch(ne.setCurrentPairTemp,e.data.id)},this.mouseOverWaitDuration))}onMouseOut(e){clearTimeout(this.mouseOverWaitHandle)}closeAlert(){this.showAlert=!1,this.alertText=""}keyFn(e,t){const a=e;return a?a.data.id:"i"}keyFnLinks(e,t){const a=e;return"source"in a?`${a.source.data.id}_${a.target.data.id}`:"i"}updateTree(e,t=!1){if(!this.root)return;t||(this.root.sort((e,t)=>e.data.id.localeCompare(t.data.id)),this.tree(this.root),"x"in e||console.log("x and y not defined on source",e),"x0"in e||(e.x0=e.x,e.y0=e.y));this.root;const a=Object(vo["f"])(".root-g"),s=a.select("g.nodes-g"),o=a.select("g.links-g"),r=this.nodes,n=s.selectAll("g").data(r,this.keyFn),i=n.enter().append("g").attr("transform",t=>`translate(${e.y0},${e.x0})`).attr("class","node").on("click",this.selectNode).on("contextmenu",this.prepMenu).attr("id",e=>`node_${e.id}`);i.filter(e=>"jumpToNode"===e.data.type).append("rect").attr("fill","#fff").attr("width",0).attr("height",0),i.filter(e=>!e.data.type).append("circle").attr("r",0),i.append("text").attr("dy","0.31em").text(e=>e.data.id).attr("class",e=>"jumpToNode"===e.data.type?"nodeTextJT":"nodeText").style("opacity",0).attr("font-size",0).select(function(){return this.parentNode&&this.parentNode.insertBefore(this.cloneNode(!0),this)}).attr("class",e=>"jumpToNode"===e.data.type?"nodeBGTextJT":"nodeBGText").attr("stroke","rgba(255, 255, 255, 1)").attr("stroke-linejoin","round").attr("stroke-width",.4*this.fontSize).style("user-select","none");const l=s.selectAll("g");l.attr("data-x",e=>e.y).attr("data-y",e=>e.x).attr("data-i",(e,t)=>t).transition().duration(this.duration).attr("transform",e=>`translate(${e.y}, ${e.x})`),l.select(".nodeText").classed("notSaved",e=>e.id in this.unSavedPairs).classed("selected",e=>e.id===this.pairId).attr("x",e=>e.children?.8*-this.fontSize:.8*this.fontSize).attr("text-anchor",e=>e.children?"end":"start"),l.select(".nodeBGText").classed("selected",e=>e.id===this.pairId).attr("x",e=>e.children?.8*-this.fontSize:.8*this.fontSize).attr("text-anchor",e=>e.children?"end":"start"),l.select(".nodeTextJT").attr("x",.8*-this.fontSize).attr("text-anchor","end"),l.select(".nodeBGTextJT").attr("x",.8*-this.fontSize).attr("text-anchor","end"),s.selectAll("text").transition().duration(this.duration).style("opacity",1).attr("font-size",this.fontSize),l.select("circle").classed("notSaved",e=>e.id in this.unSavedPairs).classed("selected",e=>e.id===this.pairId).transition().duration(this.duration).attr("fill",e=>{return e._children&&e._children.length?"lightsteelblue":"#fff"}).attr("r",e=>e.id===this.pairId?1.2*this.radius:this.radius),s.selectAll("rect").transition().duration(this.duration).attr("x",-this.radius).attr("y",-this.radius).attr("width",2*this.radius).attr("height",2*this.radius);const d=n.exit().transition().duration(this.duration).attr("transform",()=>`translate(${e.y}, ${e.x})`).style("opactiy",0).remove();d.select("circle").attr("r",0),d.select("rect").attr("width",0).attr("length",0),d.select(".nodeText").attr("font-size",0),d.select(".nodeBGText").attr("font-size",0);const c=this.links,u=o.selectAll("path").data(c,this.keyFnLinks);u.enter().append("path").attr("d",Object(yo["a"])().x(t=>e.y0||0).y(t=>e.x0||0)),o.selectAll("path").transition().duration(this.duration).attr("d",Object(yo["a"])().x(e=>e.y||0).y(e=>e.x||0)),u.exit().transition().duration(this.duration).attr("d",Object(yo["a"])().x(()=>e.y||0).y(()=>e.x||0)).remove(),r.forEach(e=>{e.x0=e.x,e.y0=e.y})}};Io([Object(te["Prop"])({default:16}),xo("design:type",Number)],To.prototype,"fontSize",void 0),Io([Object(te["Prop"])({default:750}),xo("design:type",Number)],To.prototype,"duration",void 0),Io([Object(te["Watch"])("pair.id"),xo("design:type",Function),xo("design:paramtypes",[String]),xo("design:returntype",void 0)],To.prototype,"onCurrentPairChange",null),Io([Object(te["Watch"])("unSavedPairs",{deep:!0}),xo("design:type",Function),xo("design:paramtypes",[]),xo("design:returntype",void 0)],To.prototype,"onUnSavedPairsChange",null),Io([Object(te["Watch"])("currentFile"),xo("design:type",Function),xo("design:paramtypes",[]),xo("design:returntype",void 0)],To.prototype,"onCurrentFileChange",null),Io([Object(te["Watch"])("$store.state.treeChanged"),xo("design:type",Function),xo("design:paramtypes",[String]),xo("design:returntype",void 0)],To.prototype,"onTreeChanged",null),To=Io([Object(te["Component"])({components:{}})],To);var Co=To,wo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"treeDiv",staticClass:"treeRoot",attrs:{id:"treeDiv"}},[a("v-alert",{staticClass:"alerts",attrs:{dismissible:!0,type:e.alertType,value:e.showAlert},on:{input:e.closeAlert}},[e._v(e._s(e.alertText))]),a("svg",{attrs:{id:"svgTree",width:e.width,height:e.height}},[a("g",{ref:"rootG",class:"root-g",attrs:{"font-size":e.fontSize,id:"rootG"}},[a("g",{staticClass:"links-g"}),a("g",{staticClass:"nodes-g"})])]),a("v-menu",{attrs:{"position-x":e.menuDetails.x,"position-y":e.menuDetails.y},model:{value:e.showMenu,callback:function(t){e.showMenu=t},expression:"showMenu"}},[a("v-list",{attrs:{dense:""}},[e.menuDetails.d?a("v-list-tile",[a("span",{staticClass:"title"},[e._v("Node "+e._s(e.menuDetails.d.id))])]):e._e(),a("v-divider",{attrs:{inset:""}}),e._l(e.menu,function(t){return a("v-list-tile",{key:t.title,on:{click:function(a){e.menuClicked(a,t)}}},[a("v-list-tile-title",[e._v(e._s(t.title))])],1)})],2)],1),a("v-menu",{attrs:{"min-width":"20em","position-x":e.menuDetails.x,"position-y":e.menuDetails.y,"close-on-content-click":!1},model:{value:e.showDeleteNodeModal,callback:function(t){e.showDeleteNodeModal=t},expression:"showDeleteNodeModal"}},[a("v-card",[a("v-card-title",[e._v("Node "+e._s(e.deleteNodePayload.pair&&e.deleteNodePayload.pair.id))]),a("v-card-text",[a("v-text-field",{attrs:{label:"Confirm Id of node to delete",id:"deleteNodeTextField",required:""},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.deleteNodeFromModal(t):null}},model:{value:e.deleteNodePayload.pairIdToDelete,callback:function(t){e.$set(e.deleteNodePayload,"pairIdToDelete",t)},expression:"deleteNodePayload.pairIdToDelete"}})],1),a("v-card-actions",[a("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){return t.stopPropagation(),e.deleteNodeFromModal(t)}}},[e._v("Delete Node")]),a("v-btn",{attrs:{flat:""},on:{click:function(t){t.stopPropagation(),e.showDeleteNodeModal=!1}}},[e._v("Cancel")])],1)],1)],1),a("v-menu",{attrs:{"offset-x":"","close-on-content-click":!1,"position-x":e.menuDetails.x,"position-y":e.menuDetails.y},model:{value:e.showChangeParentModal,callback:function(t){e.showChangeParentModal=t},expression:"showChangeParentModal"}},[a("v-card",[a("v-card-title",[e._v("Node "+e._s(e.changeParentPayload.pair&&e.changeParentPayload.pair.id))]),a("v-card-text",[a("v-text-field",{attrs:{label:"Id of new parent",id:"changeParentNodeTextField",required:""},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.changeParentNodeFromModal(t):null}},model:{value:e.changeParentPayload.newParentId,callback:function(t){e.$set(e.changeParentPayload,"newParentId",t)},expression:"changeParentPayload.newParentId"}})],1),a("v-card-actions",[a("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){return t.stopPropagation(),e.changeParentNodeFromModal(t)}}},[e._v("Change Parent Node")]),a("v-btn",{attrs:{flat:""},on:{click:function(t){t.stopPropagation(),e.showChangeParentModal=!1}}},[e._v("Cancel")])],1)],1)],1),a("v-menu",{attrs:{"offset-x":"","close-on-content-click":!1,"position-x":e.menuDetails.x,"position-y":e.menuDetails.y},model:{value:e.showAddJumpToNodeModal,callback:function(t){e.showAddJumpToNodeModal=t},expression:"showAddJumpToNodeModal"}},[a("v-card",[a("v-card-title",[e._v("Node "+e._s(e.addJumpToNodePayload.pairId))]),a("v-card-text",[a("v-text-field",{attrs:{label:"JumpTo node Id",id:"jumpToNodeIdTextField",required:""},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.addJumpToNodeFromModal(t):null}},model:{value:e.addJumpToNodePayload.jumpToNodeId,callback:function(t){e.$set(e.addJumpToNodePayload,"jumpToNodeId",t)},expression:"addJumpToNodePayload.jumpToNodeId"}})],1),a("v-card-actions",[a("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){return t.stopPropagation(),e.addJumpToNodeFromModal(t)}}},[e._v("Add jump-to Node")]),a("v-btn",{attrs:{flat:""},on:{click:function(t){t.stopPropagation(),e.showAddJumpToNodeModal=!1}}},[e._v("Cancel")])],1)],1)],1)],1)},No=[];function ko(e){a("AtnB"),a("yjlO")}var Oo=!1,$o=ko,jo="data-v-0a29e4f4",_o=null,Do=Object(M["a"])(Co,wo,No,Oo,$o,jo,_o),Ro=Do.exports,Bo=a("jIVf"),Ao=a.n(Bo),Eo=a("162o"),Fo=this&&this.__awaiter||function(e,t,a,s){return new(a||(a=Promise))(function(o,r){function n(e){try{l(s.next(e))}catch(e){r(e)}}function i(e){try{l(s["throw"](e))}catch(e){r(e)}}function l(e){e.done?o(e.value):new a(function(t){t(e.value)}).then(n,i)}l((s=s.apply(e,t||[])).next())})};const Vo={};function Mo(e){return Fo(this,void 0,void 0,function*(){const t=de.getters.currentUser,a=t&&t.state.pusherChannel||"";if(console.log(`received data on event 'pairUpdated' on channel ${a} = `,e),!e.version||!e.pairId&&!e.pairIds)return void console.log("pairId or version info is empty in sync message from server!");const s=Pe(de.state);if(!s)return void console.log(`auth token not found. Cannot fetch fresh pair(${e.pairId}) from server`);const o=de.getters.currentPairs;let r=[];const n=[];e.pairIds?r=e.pairIds:r.push(e.pairId);for(let i=0;i<r.length;i++){const t=r[i],a=e.version[i],s=o[t];!s||s.version!==a&&s.previousVersion!==a?n.push(t):console.log(`version of pair '${t}' on server matches what we already have, so ignoring this pair`)}if(n.length)try{const a=yield C(n,s);console.log("pairsFromServer=",a);for(const s of a)s.savedBy===t.email&&console.log(`this pair '${s.id}' was updated by us. ignoring it`),de.commit(ne.updatePairs,{newPairs:a}),de.commit(ne.treeChangedParent,e.parentId)}catch(e){console.log(`error in pairUpdated event handler. ${e}`)}})}function Lo(e){return Fo(this,void 0,void 0,function*(){console.log("received data on event 'pairDeleted' on channel 'ce' = ",e),e.parentVersion&&e.pairId&&e.parentId&&e.deletedPairIds?(de.commit(ne.deletePair,e),de.commit(ne.treeChangedParent,e.parentId)):console.log("pairId or version info or parentId is empty in sync message from server!")})}function qo(e){return Fo(this,void 0,void 0,function*(){if(console.log("received data on event 'varsUpdated' on channel 'ce' = ",e),!e.version||!e.varIds)return void console.log("varIds or version info is empty in sync message from server!");const t=Pe(de.state);if(!t)return void console.log(`auth token not found. Cannot fetch fresh vars(${e.varIds}) from server`);de.state.vars;let a=[];const s=[];e.varIds&&(a=e.varIds);for(let r=0;r<a.length;r++){const t=a[r],o=e.version[r],n=de.state.vars.find(e=>e.id===t);!n||n.version!==o&&n.previousVersion!==o?s.push(t):console.log(`version of variable '${t}' on server matches what we already have,`+" so ignoring this variable update")}if(!s.length)return;const o=de.getters.currentUser;try{const e=yield T(JSON.stringify(s),t);console.log("varsFromServer=",e);for(const t of e.vars){t.savedBy===o.email&&console.log(`this variable '${t.id}' was updated by us. ignoring it`);const e=de.state.vars.findIndex(e=>e.id===t.id);e<0?de.commit(ne.addNewVar,{newVar:t,addtoUnsaved:!1}):de.commit(ne.updateVar,{extVar:t,index:e,addtoUnsaved:!1})}}catch(e){console.log(`error in pairUpdated event handler. ${e}`)}})}function Uo(e){return Fo(this,void 0,void 0,function*(){console.log("received data on event 'varDeleted' on channel 'ce' = ",e),de.commit(ne.deleteVar,e.varId)})}var Jo=this&&this.__decorate||function(e,t,a,s){var o,r=arguments.length,n=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,a,s);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(n=(r<3?o(n):r>3?o(t,a,n):o(t,a))||n);return r>3&&n&&Object.defineProperty(t,a,n),n},zo=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},Wo=this&&this.__awaiter||function(e,t,a,s){return new(a||(a=Promise))(function(o,r){function n(e){try{l(s.next(e))}catch(e){r(e)}}function i(e){try{l(s["throw"](e))}catch(e){r(e)}}function l(e){e.done?o(e.value):new a(function(t){t(e.value)}).then(n,i)}l((s=s.apply(e,t||[])).next())})};let Ho=class extends te["Vue"]{constructor(){super(...arguments),this.numAttempts=0,this.error=""}get user(){const e=this.$store.getters.currentUser;return e}get isAuthenticated(){return this.$store.getters.isAuthenticated}get auth2(){return D.auth2}set auth2(e){D.auth2=e}mounted(){this.loadAuth2()}loadAuth2(){try{console.log(`numAttempts= ${this.numAttempts}. About to load auth2 using gapi`),this.error="",gapi.load("auth2",this.initAuth2)}catch(e){this.numAttempts<5&&(this.numAttempts+=1,Object(Eo["setTimeout"])(this.loadAuth2,500),this.error=e.toString())}}initAuth2(){try{gapi.auth2.init({client_id:"768028596235-nicpce8112e5vkhpbrjenbbl6t23nbhj.apps.googleusercontent.com"}),this.auth2||(this.auth2=gapi.auth2.getAuthInstance()),this.signOutOnly||gapi.signin2.render("sign-in",{onsuccess:this.onSignIn,onfailure:this.onSignInError})}catch(e){this.error=`Google Authentication initialization failed. ${e}`}}onSignInError(e){console.log("ga signIn failed. error=",e),this.error=`Sign-In failed: ${e.error}`}onSignIn(e){if(e&&e.getId()){const t=e.getAuthResponse().id_token,a=e.getBasicProfile().getEmail();console.log(`onSignIn. email= ${a}`,t);const s={id:e.getId(),name:e.getBasicProfile().getName(),email:a,state:{collapsedPairs:{},pusherChannel:""}};p(t).then(e=>{if(e&&(e=JSON.parse(e),e.authSucceeded)){if(s.token=this.getBasicAuthHeaderFromToken(s.id,e.msg),e.userState&&(console.log("userState returned is",e.userState),s.state=Object.assign({},s.state,e.userState),s.state.pusherChannel&&!Vo.channel)){Vo.socket||(Vo.socket=new Ao.a("9142b5aca021fde2ee8a",{cluster:"mt1",encrypted:!0,authEndpoint:N("pusher/auth")}));const e=Vo.socket;Vo.socket=e,e.config.auth={headers:{Authorization:s.token}},Vo.channel=e.subscribe(s.state.pusherChannel),console.log("binding channel to event 'pairUpdated'"),Vo.channel.bind("pairUpdated",Mo),Vo.channel.bind("pairDeleted",Lo),Vo.channel.bind("varsUpdated",qo),Vo.channel.bind("varDeleted",Uo)}this.$store.dispatch(ne.setCurrentUser,s),this.error="";const t=this.$route.query.redirect||"/";this.$router.push(t)}}).catch(e=>{this.error=`in onSignIn. Error in postAuth. ${JSON.stringify(e)}`,console.log(this.error),this.signOut(),this.$store.dispatch(ne.setCurrentUser,null)})}else console.log("onSignIn called but newUser is null or undefined"),this.signOut()}onUserChange(e){console.log("logged in user change",e.getId())}onSignedInChange(e){console.log("sign-in status changed to ",e)}launchMenu(){console.log("menu launched")}getBasicAuthHeaderFromToken(e,t){const a="Basic "+btoa(`${e}:${t}`);return a}signOut(){return Wo(this,void 0,void 0,function*(){if(console.log(`sign out clicked ${this.signOutOnly}`,this.auth2),Vo.channel){console.log("unsubscribing from channel");this.$store.state;const e=this.$store.getters.currentUser;Vo.socket&&Vo.socket.unsubscribe(e.state.pusherChannel),Vo.channel=null,e.state.pusherChannel=""}const e=this.auth2||null;e&&(console.log("auth2 found. signing out user"),e.currentUser=null,e.signOut(),e.disconnect(),this.$store.dispatch(ne.setCurrentUser,null),this.$router.push("/login"))})}};Jo([Object(te["Prop"])({default:!1,required:!1}),zo("design:type",Boolean)],Ho.prototype,"signOutOnly",void 0),Ho=Jo([Object(te["Component"])({components:{}})],Ho);var Go=Ho,Ko=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isAuthenticated,expression:"!isAuthenticated"}]},[e._v("Login using Google Account")]),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isAuthenticated,expression:"!isAuthenticated"}]},[a("div",{attrs:{id:"sign-in"}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isAuthenticated,expression:"isAuthenticated"}],staticClass:"pl-2"},[e._v("\n    "+e._s(e.user&&e.user.email)+"\n  ")]),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.isAuthenticated,expression:"isAuthenticated"}],on:{click:e.signOut}},[e._v("Sign Out")]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}]},[e._v(e._s(e.error))])],1)},Qo=[];function Xo(e){a("cNFf")}var Yo=!1,Zo=Xo,er="data-v-0e2431e9",tr=null,ar=Object(M["a"])(Go,Ko,Qo,Yo,Zo,er,tr),sr=ar.exports,or=this&&this.__decorate||function(e,t,a,s){var o,r=arguments.length,n=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,a,s);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(n=(r<3?o(n):r>3?o(t,a,n):o(t,a))||n);return r>3&&n&&Object.defineProperty(t,a,n),n};let rr=class extends te["Vue"]{constructor(){super(...arguments),this.lFileList=[],this.lRouteList=[{title:"External Variables",route:"/vars"},{title:"Tree View",route:"/"}]}get fileList(){return this.lFileList.length?this.lFileList:["CareerManagementQ","ChangeManagementQ","CommonQ","HRDirectQ","StatefulConvos","Welcome_MainMenu_JobSatQ"]}launchMenu(){console.log("menu launched")}getPairsFromFileId(e){console.log(`getting pairs for file ${e}`),this.$store.dispatch(ne.setCurrentFile,e)}selectionChanged(e){console.log("selectionChanged",e)}moreMenuItemClicked(e){this.$router.push(e)}};rr=or([Object(te["Component"])({components:{login:sr}})],rr);var nr=rr,ir=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-menu",{attrs:{"offset-x":"","close-on-content-click":!1}},[a("v-btn",{attrs:{slot:"activator",icon:"",small:"",tabindex:"0",id:"ceMenu"},on:{click:e.launchMenu},slot:"activator"},[a("v-icon",[e._v("menu")])],1),a("v-card",[a("v-card-title",[e._v("Menu")]),a("login",{attrs:{signOutOnly:!0}}),a("v-list",e._l(e.lRouteList,function(t){return a("v-list-tile",{key:t.title,on:{click:function(a){e.moreMenuItemClicked(t.route)}}},[a("v-list-tile-title",[e._v(e._s(t.title))])],1)}))],1)],1)},lr=[];function dr(e){a("tqee")}var cr=!1,ur=dr,pr="data-v-3eb49ce6",hr=null,gr=Object(M["a"])(nr,ir,lr,cr,ur,pr,hr),fr=gr.exports,mr=this&&this.__decorate||function(e,t,a,s){var o,r=arguments.length,n=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,a,s);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(n=(r<3?o(n):r>3?o(t,a,n):o(t,a))||n);return r>3&&n&&Object.defineProperty(t,a,n),n},br=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};let vr=class extends te["Vue"]{constructor(){super(...arguments),this.ceContent="content from prop",this.pairsToShow=[],this.hoverIndex=-1,this.searchBoxShortcutKey="Ctrl+F",this.saveShortcutKey="Ctrl+S",this.locateShortcutKey="Ctrl+L",this.searchTextField="",this.prevSearchText="",this.displaySearchResults=!1,this.options={shouldSort:!0,tokenize:!0,threshold:.1,location:0,distance:3e3,maxPatternLength:32,includeMatches:!0,includeScore:!0,minMatchCharLength:1,keys:["id","jumpToChildren","userSays","botSays.isPrompt","botSays.type","botSays.label.name","botSays.data","botSays.data.name","botSays.data.inputs","botSays.data.prompt","botSays.data.choices","botSays.data.title","botSays.data.text","botSays.data.buttons.title","botSays.data.buttons.value","botSays.data.buttons.type","botSays.data.images.origUrl","botSays.data.images.prevUrl","botSays.label.name"]},this.displayPair=!1,this.showMenu=!1,this.ceSearchRootEl=null,this.debouncedResize=Object(ee["debounce"])(this.Resize),this.showAlert=!1,this.lFileList=[]}onGlobalAlertChanged(){this.globalAlert.alertText&&(this.showAlert=!0)}onCurrentUserChange(){console.log("current user changed. calling setFileNames"),this.setFileNames()}get globalAlert(){const e=this.$store.state.globalError;return e}get fileList(){return this.lFileList.length?this.lFileList:(this.setFileNames(),["CareerManagementQ","ChangeManagementQ","CommonQ","HRDirectQ","StatefulConvos","Welcome_MainMenu_JobSatQ"])}get unSavedPairsLength(){return console.log("unSavedPairs change detected in editor get unSavedPairs"),Object.keys(this.$store.state.unSavedPairs).length}get currentFile(){return this.$store.state.currentFile}get pairs(){const e=this.$store.state,t=e.files[e.currentFile].data.pairs||{},a=[];for(const s in t)t.hasOwnProperty(s)&&a.push(t[s]);return a}get pairId(){const e=this.$store.state;return e.currentPair}set pairId(e){this.$store.commit(ne.locateCurrentPair,e)}get fuse(){return console.log("initializing fuse"),new Z.a(this.pairs,this.options)}mounted(){console.log("ContentEditor mounted. about to call shortcut");const e=this.$store.state;e.keyboardShortcuts&&(i.add(this.saveShortcutKey,e=>{this.$store.dispatch(ne.savePair,"")},{type:"keydown",propagate:!1,target:document}),i.add(this.locateShortcutKey,e=>{this.showCurrentPair()},{type:"keydown",propagate:!1,target:document}),i.add(this.searchBoxShortcutKey,e=>{console.log("func passed to shortcut",e);const t=document.getElementById("search-text-field");t&&(t.focus(),t.scrollIntoView())},{type:"keydown",propagate:!1,target:document})),this.ceSearchRootEl=document.getElementById("ce-search-root")}beforeDestroy(){i.remove(this.searchBoxShortcutKey),i.remove(this.saveShortcutKey),i.remove(this.locateShortcutKey);for(let e=1;e<10;e++)i.remove(`Alt+${e}`)}closeAlert(){this.showAlert=!1}setFileNames(){I(this.$store.getters.currentUser.token).then(e=>{this.lFileList=e})}getPairsFromFileId(e){console.log(`getting pairs for file ${e}`),this.$store.dispatch(ne.setCurrentFile,e)}showCurrentPair(){this.displayPair=!this.displayPair,this.displayPair&&(this.displaySearchResults=!1)}searchPairs(e){if(e===this.prevSearchText)return;if(!e)return this.pairsToShow=[],this.hoverIndex=-1,void(this.prevSearchText="");this.pairsToShow=this.fuse.search(e),this.prevSearchText=e}hightlightMatches(e,t){if(!e.length)return"";const a=e[0].value||"";let s=a;const o="<mark></mark>".length;let r=0;const n=e[0].indices,i=t.length;for(let[l,d]of n)l+=o*r,d=d+1+o*r,d-l<.8*i||(r+=1,s=s.slice(0,l)+"<mark>"+s.slice(l,d)+"</mark>"+s.slice(d));return s}pairClicked(e){console.log(`pair ${e} clicked`),this.displayPair=!0,this.pairId=e,te["Vue"].nextTick().then(()=>{this.displaySearchResults=!1})}hideSearchResults(){console.log("hiding search results"),this.displaySearchResults=!1}focusResults(e){switch(e.stopPropagation(),e.key){case"Down":case"ArrowDown":if(-1===this.hoverIndex){const e=document.getElementById("pair-search-results");e&&e.focus()}this.hoverIndex<this.pairsToShow.length-1&&this.hoverIndex++;break;case"Up":case"ArrowUp":if(this.hoverIndex>-1&&this.hoverIndex--,this.hoverIndex<0){const e=document.getElementById("search-text-field");e&&e.focus()}break;case"Enter":if(this.hoverIndex>-1)console.log(`calling pairClicked with ${this.pairsToShow[this.hoverIndex].item.id}`),this.pairClicked(this.pairsToShow[this.hoverIndex].item.id);else if(this.displaySearchResults&&this.pairsToShow.length){const e=document.getElementById("ceMenu");e&&e.focus(),this.pairClicked(this.pairsToShow[0].item.id)}default:this.searchPairs(this.searchTextField);break}return!1}initResize(){console.log("about to initialize resizer"),document.addEventListener("mousemove",this.debouncedResize,!1),document.addEventListener("mouseup",this.stopResize,!1)}Resize(e){const t=this.ceSearchRootEl;t.style.width=t.clientWidth+t.offsetLeft-e.clientX+"px"}stopResize(e){console.log("removing resize event listeners"),document.removeEventListener("mousemove",this.debouncedResize,!1),document.removeEventListener("mouseup",this.stopResize,!1)}};mr([Object(te["Watch"])("globalAlert.alertText"),br("design:type",Function),br("design:paramtypes",[]),br("design:returntype",void 0)],vr.prototype,"onGlobalAlertChanged",null),mr([Object(te["Watch"])("$state.currentUser"),br("design:type",Function),br("design:paramtypes",[]),br("design:returntype",void 0)],vr.prototype,"onCurrentUserChange",null),vr=mr([Object(te["Component"])({components:{"con-pair":mo,tree:Ro,"more-menu":fr}})],vr);var yr=vr,Pr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"ce-root",attrs:{fluid:"","grid-list-sm":""}},[a("v-alert",{staticClass:"alerts",attrs:{dismissible:!0,type:e.globalAlert.alertType,value:e.showAlert},on:{input:e.closeAlert}},[e._v(e._s(e.globalAlert.alertText))]),a("v-flex",{staticClass:"library-label dark primary",attrs:{sm6:""}},[a("v-badge",{attrs:{right:"",color:"red",value:e.unSavedPairsLength>0}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.unSavedPairsLength>0,expression:"unSavedPairsLength > 0"}],attrs:{slot:"badge",dark:""},slot:"badge"},[e._v(e._s(e.unSavedPairsLength))]),a("v-select",{attrs:{items:e.fileList,value:e.currentFile,dense:"",flat:"",dark:"","content-class":"primary","hide-details":"","hide-selected":"",label:"Select File",editable:""},on:{input:e.getPairsFromFileId}})],1)],1),a("v-flex",{staticClass:"ce-search-root",attrs:{sm6:"",id:"ce-search-root"}},[a("v-card",{attrs:{float:""}},[a("v-toolbar",{staticClass:"ce-search",attrs:{dense:""}},[a("v-icon",{staticClass:"resize",attrs:{id:"ce-search-resize"},on:{mousedown:e.initResize}},[e._v("more_vert")]),a("v-text-field",{attrs:{"prepend-icon":"search",tabindex:"0","hide-details":"","single-line":"",id:"search-text-field",autofocus:-1===e.hoverIndex},on:{focus:function(t){e.displaySearchResults=!0,e.hoverIndex=-1,e.displayPair=!1},keyup:function(t){e.focusResults(t)}},model:{value:e.searchTextField,callback:function(t){e.searchTextField=t},expression:"searchTextField"}}),a("v-btn",{attrs:{icon:"",small:"",tabindex:"0"},on:{click:e.showCurrentPair}},[a("v-icon",[e._v("my_location")])],1),a("more-menu")],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.pairsToShow.length&&e.displaySearchResults,expression:"pairsToShow.length && displaySearchResults"}],attrs:{tabindex:"0",id:"pair-search-results"},on:{keyup:function(t){e.focusResults(t)},blur:function(t){e.hoverIndex=-1}}},[a("v-list",{attrs:{"three-line":""}},[e._l(e.pairsToShow,function(t,s){return[a("div",{key:"li_"+s,class:{"search-result-selected":s===e.hoverIndex},attrs:{tabindex:s===e.hoverIndex?0:-1,autofocus:s===e.hoverIndex},on:{blur:function(t){e.hoverIndex=-1},keyup:function(t){e.focusResults(t)}}},[t.header?a("v-subheader",{key:t.header},[e._v(e._s(t.header))]):t.divider?a("v-divider",{key:s,attrs:{inset:t.inset}}):a("v-list-tile",{key:t.item.id,on:{keyup:function(a){if(!("button"in a)&&e._k(a.keyCode,"enter",13,a.key,"Enter"))return null;e.pairClicked(t.item.id)},click:function(a){e.pairClicked(t.item.id)}}},[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:e._s(t.item.id)}}),t.matches&&t.matches.length?a("v-list-tile-sub-title",{domProps:{innerHTML:e._s("matched ("+t.matches[0].key+"): "+e.hightlightMatches(t.matches,e.searchTextField))}}):e._e()],1)],1)],1)]})],2)],1),a("con-pair",{directives:[{name:"show",rawName:"v-show",value:e.displayPair,expression:"displayPair"}],attrs:{pairId:e.pairId}})],1)],1),a("v-flex",{staticClass:"pairGraphContainer",attrs:{xs12:"",dflex:""}},[a("div",{ref:"pairGraph",attrs:{id:"pairGraph"}},[a("tree",{attrs:{pairId:e.pairId}})],1)])],1)},Sr=[];function Ir(e){a("wBlv"),a("CUE1")}var xr=!1,Tr=Ir,Cr="data-v-1ebda102",wr=null,Nr=Object(M["a"])(yr,Pr,Sr,xr,Tr,Cr,wr),kr=Nr.exports,Or=this&&this.__decorate||function(e,t,a,s){var o,r=arguments.length,n=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,a,s);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(n=(r<3?o(n):r>3?o(t,a,n):o(t,a))||n);return r>3&&n&&Object.defineProperty(t,a,n),n};let $r=class extends te["Vue"]{};$r=Or([Object(te["Component"])({components:{login:sr}})],$r);var jr=$r,_r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login"},[a("div",{staticClass:"display-3"},[e._v("\n    Login\n  ")]),a("login",{staticClass:"login"})],1)},Dr=[];function Rr(e){a("lrex")}var Br=!1,Ar=Rr,Er="data-v-7d77bc70",Fr=null,Vr=Object(M["a"])(jr,_r,Dr,Br,Ar,Er,Fr),Mr=Vr.exports,Lr=this&&this.__decorate||function(e,t,a,s){var o,r=arguments.length,n=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,a,s);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(n=(r<3?o(n):r>3?o(t,a,n):o(t,a))||n);return r>3&&n&&Object.defineProperty(t,a,n),n},qr=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};let Ur=class extends te["Vue"]{constructor(){super(...arguments),this.nlpSearchTextField="",this.nlpIntentsToShow=[],this.nlpTableMetadata=[{colName:"intentName",colDisplayName:"Intent Name",placeholderText:"required: unique name of intent"},{colName:"nodeId",colDisplayName:"Node Id",placeholderText:"required: node Id to invoke when this intent is matched"},{colName:"utterances",type:"array",placeholderText:"required: sample utterance to train NLP, at least 5 needed, per intent"}],this.searchOptions={shouldSort:!0,tokenize:!1,threshold:.2,location:0,distance:3e3,maxPatternLength:32,includeMatches:!1,includeScore:!1,minMatchCharLength:1,keys:["intentName","nodeId","savedBy","utterances"]}}onNlpIntentsChange(){this.searchNlpIntents(this.nlpSearchTextField)}get nlpIntents(){const e=this.$store.getters.nlpIntents,t=e.map(({intentName:e,nodeId:t,savedBy:a,savedOn:s,utterances:o})=>({intentName:e,nodeId:t,savedOn:s,savedBy:a,utterances:o.map(e=>e.origText)}));return t}set nlpIntents(e){console.log("setting new nlpIntents. first convert data back to NlpIntent[]",e)}get notSaved(){const e=this.$store.state.NlpIntentsBeingSaved,t=this.$store.state.NlpIntentsToSave;return!(!e||!e.length)||!(!t||!t.length)}get fuse(){return console.log("initializing fuse"),new Z.a(this.nlpIntents,this.searchOptions)}mounted(){this.refreshNlpFromServer()}refreshNlpFromServer(){this.$store.dispatch(ne.setNlpIntents,JSON.stringify(["*"]))}searchNlpIntents(e){console.log(`searching ${e}`),this.nlpIntentsToShow=e?this.fuse.search(e).slice(0,2):this.nlpIntents.slice(0,2)}updateNlpIntents({item:e,index:t}){console.log("updating nlpIntents array. first convert data back to NlpIntent[]"),console.log(`updateNlpIntents called- index=${t}, item=${JSON.stringify(e,null,2)},`);const a=this.nlpIntents.length;let s=a;if(t<this.nlpIntentsToShow.length){const e=this.nlpIntentsToShow[t];for(let t=0;t<a;t++){const a=this.nlpIntents[t];if(a.intentName===e.intentName){s=t;break}}}else s=a,console.log("new guid=",B());this.$store.dispatch(ne.updateNlpIntents,{nlpIntent:e,index:s})}saveNlpIntents(){console.log("save nlpIntents called"),this.$store.dispatch(ne.saveNlpIntents)}};Lr([Object(te["Prop"])({required:!1,default:0}),qr("design:type",Number)],Ur.prototype,"sampleProp",void 0),Lr([Object(te["Watch"])("nlpIntents"),qr("design:type",Function),qr("design:paramtypes",[]),qr("design:returntype",void 0)],Ur.prototype,"onNlpIntentsChange",null),Ur=Lr([Object(te["Component"])({components:{"more-menu":fr,"content-table":ra}})],Ur);var Jr=Ur,zr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"nlp-root"},[a("v-toolbar",{staticClass:"px-2 ce-search",attrs:{dense:"",extended:"",flat:""}},[a("h2",[e._v("NLP Intents and Utterances")]),a("div",{staticClass:"nlp-search",attrs:{slot:"extension"},slot:"extension"},[a("v-text-field",{attrs:{"prepend-icon":"search",tabindex:"0","hide-details":"","single-line":"",id:"nlp-search-text-field"},on:{keyup:function(t){e.searchNlpIntents(e.nlpSearchTextField)}},model:{value:e.nlpSearchTextField,callback:function(t){e.nlpSearchTextField=t},expression:"nlpSearchTextField"}}),a("v-btn",{staticClass:"button",class:{notSaved:e.notSaved,saved:!e.notSaved},attrs:{icon:"",small:"",tabindex:"0"},on:{click:e.saveNlpIntents}},[a("v-icon",[e._v("save")])],1),a("v-btn",{attrs:{slot:"activator",icon:"",small:"",tabindex:"0"},on:{click:e.refreshNlpFromServer},slot:"activator"},[a("v-icon",[e._v("refresh")])],1),a("more-menu")],1)]),a("div",{staticClass:"nlp-list"},[a("content-table",{staticClass:"px-2",attrs:{value:e.nlpIntentsToShow,emitOne:!0,valueColumns:e.nlpTableMetadata,header:"Intents"},on:{input:e.updateNlpIntents}})],1)],1)},Wr=[];function Hr(e){a("Dnte")}var Gr=!1,Kr=Hr,Qr="data-v-2171f9ec",Xr=null,Yr=Object(M["a"])(Jr,zr,Wr,Gr,Kr,Qr,Xr),Zr=Yr.exports,en=this&&this.__decorate||function(e,t,a,s){var o,r=arguments.length,n=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,a,s);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(n=(r<3?o(n):r>3?o(t,a,n):o(t,a))||n);return r>3&&n&&Object.defineProperty(t,a,n),n},tn=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},an=this&&this.__awaiter||function(e,t,a,s){return new(a||(a=Promise))(function(o,r){function n(e){try{l(s.next(e))}catch(e){r(e)}}function i(e){try{l(s["throw"](e))}catch(e){r(e)}}function l(e){e.done?o(e.value):new a(function(t){t(e.value)}).then(n,i)}l((s=s.apply(e,t||[])).next())})};let sn=class extends te["Vue"]{constructor(){super(...arguments),this.showAlert=!1,this.varsSearchTextField="",this.varsToShow=[],this.varsSqlTableMetadata=[{colName:"id",colDisplayName:"Variable Id",type:"no-edit"},{colName:"varName",colDisplayName:"Variable Name",resetOnEmit:!0,saveAction:ne.saveVars,placeholderText:"required: unique name of variable, e.g. sql.opp_name Use lower case."},{colName:"query",colDisplayName:"     SQL Query String     ",resetOnEmit:!0,saveAction:ne.saveVars,placeholderText:"required: query string that will be invoked when this variable is resolved. Use lower case."},{colName:"default",colDisplayName:"Default Value",resetOnEmit:!0,saveAction:ne.saveVars,placeholderText:"optional: default value to return if matching rows not found"},{colName:"notes",colDisplayName:"Notes/Comments",resetOnEmit:!0,saveAction:ne.saveVars,placeholderText:"optional: comment on why/where this variable is used"}],this.searchOptions={shouldSort:!0,tokenize:!1,threshold:.2,location:0,distance:3e3,maxPatternLength:32,includeMatches:!1,includeScore:!1,minMatchCharLength:1,keys:["id","varName","query","notes","savedBy"]},this.saveShortcutKey="Ctrl+S"}onVarsChange(){this.searchVars(this.varsSearchTextField)}onGlobalAlertChanged(){this.globalAlert.alertText&&(this.showAlert=!0,this.searchVars(this.varsSearchTextField))}get globalAlert(){const e=Object(ee["cloneDeep"])(this.$store.state.globalError);return e}get vars(){const e=this.$store.state.vars;return e}get notSavedCount(){const e=this.$store.state.inFlightVars,t=this.$store.state.unSavedVars;return Object.keys(e||{}).length+Object.keys(t||{}).length}get fuse(){return console.log("initializing fuse"),new Z.a(this.vars,this.searchOptions)}mounted(){this.refreshVarsFromServer();const e=this.$store.state;e.keyboardShortcuts&&i.add(this.saveShortcutKey,e=>{this.$store.dispatch(ne.saveVars)},{type:"keydown",propagate:!1,target:document})}beforeDestroy(){i.remove(this.saveShortcutKey)}closeAlert(){this.showAlert=!1}refreshVarsFromServer(){this.$store.dispatch(ne.setVars,JSON.stringify(["*"]))}searchVars(e){console.log(`searching ${e}`),this.varsToShow=e?[...this.fuse.search(e)]:this.vars}handleFiles(e){if(!e.target||!e.target.files)return;const t=e.target.files;console.log("handling file upload!",t);const a=Pe(this.$store.state);if(!a)return;const s={};for(const o of t)s[o.name]=o;e.target.value="";for(const o in s)if(s.hasOwnProperty(o)){const e=s[o],t=new FileReader;t.onload=(e=>{this.uploadFile(e,o,a)}),t.readAsArrayBuffer(e)}}uploadFile(e,t,a){return an(this,void 0,void 0,function*(){const s=t.slice(0,-4).toLowerCase(),o=e.currentTarget.result;console.log(`fileData type= ${typeof o}, ${o.byteLength}`,o);try{const e=yield y(o,s,a);this.$store.commit(ne.setGlobalError,{msg:`Successully imported file ${t} as table ${s}. `+e,alertType:q.success})}catch(e){this.$store.commit(ne.setGlobalError,`Error in makeRequest for uploading file. Error is ${e.status}: ${e.response}`)}})}updateVars({item:e,index:t}){console.log(`updateVars called- index=${t}, item=${JSON.stringify(e,null,2)},`),e=Object(ee["cloneDeep"])(e),e.varName=e.varName.trim().toLowerCase(),e.varName.startsWith("$")&&(e.varName=e.varName.slice(1)),e.varName.startsWith("sql.")?(e.query=e.query&&e.query.replace(/\xa0/g," ")||e.query,this.$store.dispatch(ne.updateVar,{extVar:e})):this.$store.commit(ne.setGlobalError,"variable name must start with sql.")}saveVars(){console.log("save vars called"),this.$store.dispatch(ne.saveVars)}deleteVar({item:e,index:t}){e.id&&this.$store.dispatch(ne.deleteVar,{extVar:e,index:t})}testEmptyRow(e){return!e.varName&&!e.query}};en([Object(te["Prop"])({required:!1,default:0}),tn("design:type",Number)],sn.prototype,"sampleProp",void 0),en([Object(te["Watch"])("vars"),tn("design:type",Function),tn("design:paramtypes",[]),tn("design:returntype",void 0)],sn.prototype,"onVarsChange",null),en([Object(te["Watch"])("globalAlert.alertText"),tn("design:type",Function),tn("design:paramtypes",[]),tn("design:returntype",void 0)],sn.prototype,"onGlobalAlertChanged",null),sn=en([Object(te["Component"])({components:{"more-menu":fr,"content-table":ra}})],sn);var on=sn,rn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vars-root"},[a("v-toolbar",{staticClass:"px-2 mt-1 ce-search",attrs:{dense:"",extended:"",flat:""}},[a("v-badge",{attrs:{right:"",color:"red",value:e.notSavedCount>0}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.notSavedCount>0,expression:"notSavedCount > 0"}],attrs:{slot:"badge",dark:""},slot:"badge"},[e._v(e._s(e.notSavedCount))]),a("h2",[e._v("External Variables List")])]),a("v-spacer"),a("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"fileElem",multiple:"",accept:".csv"},on:{change:function(t){e.handleFiles(t)}}}),a("label",{staticClass:"selectFile primary pa-2 white--text sunheading",attrs:{for:"fileElem"}},[e._v("Select csv file to upload")]),a("div",{staticClass:"vars-search",attrs:{slot:"extension"},slot:"extension"},[a("v-text-field",{attrs:{"prepend-icon":"search",tabindex:"0","hide-details":"","single-line":"",id:"vars-search-text-field"},on:{keyup:function(t){e.searchVars(e.varsSearchTextField)}},model:{value:e.varsSearchTextField,callback:function(t){e.varsSearchTextField=t},expression:"varsSearchTextField"}}),a("v-btn",{staticClass:"button",class:{notSaved:e.notSavedCount,saved:!e.notSavedCount},attrs:{icon:"",small:"",tabindex:"0"},on:{click:e.saveVars}},[a("v-icon",[e._v("save")])],1),a("v-btn",{attrs:{slot:"activator",icon:"",small:"",tabindex:"0"},on:{click:e.refreshVarsFromServer},slot:"activator"},[a("v-icon",[e._v("refresh")])],1),a("more-menu")],1)],1),a("v-alert",{staticClass:"alerts",attrs:{dismissible:!0,type:e.globalAlert.alertType,value:e.showAlert},on:{input:e.closeAlert}},[e._v(e._s(e.globalAlert.alertText))]),a("div",{staticClass:"vars-list"},[a("content-table",{staticClass:"px-2",attrs:{value:e.varsToShow,allowDrag:!1,emitOne:!0,testEmptyRow:e.testEmptyRow,valueColumns:e.varsSqlTableMetadata,header:"SQL Variables"},on:{input:e.updateVars,delete:e.deleteVar}})],1)],1)},nn=[];function ln(e){a("E5Ku")}var dn=!1,cn=ln,un="data-v-392566d2",pn=null,hn=Object(M["a"])(on,rn,nn,dn,cn,un,pn),gn=hn.exports;s["default"].use(X["a"]);const fn=new X["a"]({routes:[{path:"/",name:"ContentEditor",component:kr,meta:{requiresAuth:!0}},{path:"/login",name:"login",component:Mr},{path:"/vars",name:"var",component:gn,meta:{requiresAuth:!0}},{path:"/nlp",name:"nlp",component:Zr,meta:{requiresAuth:!0}}]});fn.beforeEach((e,t,a)=>{e.matched.some(e=>e.meta.requiresAuth)?de.getters.isAuthenticated?a():a({path:"/login",query:{redirect:e.fullPath}}):a()});var mn=fn,bn=a("ydGU");Object(bn["a"])("service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached(){console.log("Content has been cached for offline use.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}}),s["default"].config.productionTip=!1,s["default"].use(E.a),l(ce),new s["default"]({router:mn,store:ce,render:e=>e(Q)}).$mount("#app")},yjlO:function(e,t){}},[0]);
//# sourceMappingURL=app.2f94ff08.js.map